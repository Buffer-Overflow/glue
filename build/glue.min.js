var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return m(a.width)&&m(a.height)},d=function(a){return m(a.x)&&m(a.y)},e=function(a){return q(a,"get")&&i(a.get)&&q(a,"getValue")&&i(a.getValue)&&q(a,"iterate")&&i(a.iterate)&&q(a,"set")&&i(a.iterate)&&q(a,"unset")&&i(a.iterate)?!0:void 0},f=function(a){return"string"==typeof a||a instanceof String},g=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=function(a){return"[object Object]"===Object.prototype.toString.call(a)},i=function(a){return"[object Function]"===Object.prototype.toString.call(a)},j=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},k=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},l=function(){},m=function(a){return"[object Number]"===Object.prototype.toString.call(a)},n=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},o=function(a){return"[object Date]"===Object.prototype.toString.call(a)},p=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},q=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},r=function(a){return void 0===a},s=function(a){return void 0!==a},t=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},u=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},v=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},w=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},x=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},y=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},z=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},A=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},B=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},C=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},D=function(a){return!(!a||1!==a.nodeType)},E=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},F=function(a){return this.combine({},a,!0)},G=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},H=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},I=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},J=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},K=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},L=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},M=function(a){return typeof a==typeof Function},N=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=N(a,c,e)),d&&(d.style.display=""),e},O=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),T(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},P=function(a,b){return a.getAttribute("data-"+b)},Q=function(a,b,c){return a.setAttribute("data-"+b,c)},R=function(a,c){return(R=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},S=function(a,c){var d,e,f=this;return(S=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!R(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},T=function(a,c){return(T=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},U=function(a){a.className="",a.setAttribute("class","")},V=function(a,c){return(V=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return R(a,b)?(T(a,b),!1):(S(a,b),!0)})(a,c)},W=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},X=function(a){return b.querySelector(a)},Y=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},Z=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},$=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},_=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:f,isArray:g,isObject:h,isFunction:i,emptyFn:l,isNumber:m,isBoolean:n,isDate:o,isInt:p,has:q,isUndefined:r,isDefined:s,isEmpty:t,isArgument:u,getRandom:v,upperFirst:w,multiIs:x,combine:y,imports:k,isDomList:z,toArray:A,contains:B,indexOf:C,isElement:D,size:E,clone:F,isRegex:G,keys:H,once:I,memoize:J,removeObject:K,getStyle:L,isFunctionByType:M,getNodeOnPoint:N,getNodesOnPoint:O,getData:P,setData:Q,containsClass:R,addClass:S,removeClass:T,removeClasses:U,toggleClass:V,triggerEvent:W,$:X,setAnimationFrameTimeout:Y,animationEvent:Z,domReady:$,arrayMatch:j,sort:{stable:_}}}(window,window.document);var adapters=adapters||{};adapters.glue=function(a,b){"use strict";return{module:{create:a.define,get:a.require,config:a.requirejs.config},sugar:b.sugar,audio:Howl}}(window,modules.glue),function(a){var b=function(a){"use strict";return{module:a.glue.module,sugar:a.glue.sugar,audio:a.glue.audio}}(adapters);a.glue={module:b.module},a.game={},b.module.create("glue",function(){return b})}(window),glue.module.create("glue/basecomponent",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c){var d,e,f;return b.isString(a)&&(d=a,e=c||{}),{set:function(c){return b.isObject(c)?(f=c,e[a]=c,b.isFunction(c.register)&&c.register(),e):void 0},getName:function(){return d},getBaseObject:function(){return e},getComponent:function(){return f},register:function(a){e.register(a,f[a],d)},unregister:function(a){e.unregister(a,d)}}}}),glue.module.create("glue/baseobject",["glue","glue/math/vector","glue/math/rectangle","glue/math/dimension"],function(a,b,c,d){var e=a.sugar,f=0;return function(){var a,g,h,i,j,k=Array.prototype.slice.call(arguments),l=null,m=b(0,0),n=b(0,0),o=d(0,0),p=k.length,q=0,r=["update","draw","pointerDown","pointerMove","pointerUp"],s=["animatable","spritable","spineable"],t=s.length,u={destroy:{},draw:{},update:{},pointerDown:{},pointerMove:{},pointerUp:{}},v={},w=null,x=++f,y=function(a,b){h=u[a];for(registrant in h)"draw"===a&&e.contains(s,registrant)||h[registrant].call(z,b)},z={add:function(a){return e.combine(this,a)},setName:function(b){a=b},getName:function(){return a},update:function(a){y("update",a)},count:0,draw:function(a){var c=a.scroll||b(0,0),d=a.context;for(d.save(),d.translate(m.x-c.x,m.y-c.y),y("draw",a),d.translate(-n.x,-n.y),i=0;t>i;++i)j=u.draw[s[i]],j&&j(a);d.restore()},pointerDown:function(a){y("pointerDown",a)},pointerMove:function(a){y("pointerMove",a)},pointerUp:function(a){y("pointerUp",a)},register:function(a,b,c){e.contains(r,a)&&e.isFunction(b)&&(u[a][c]=b)},unregister:function(a,b){e.contains(r,a)&&e.isFunction(u[a][b])&&delete u[a][b]},getPosition:function(){return m},setPosition:function(a){e.isVector(a)&&(m.x=a.x,m.y=a.y,this.updateBoundingBox())},getDimension:function(){return o},setDimension:function(a){e.isDimension(a)&&(o=a,this.updateBoundingBox())},getBoundingBox:function(){return g},setBoundingBox:function(a){g=a},updateBoundingBox:function(){var a=z.scalable?z.scalable.getScale():b(1,1),d=m.x-n.x*a.x,e=m.y-n.y*a.y,f=m.x+(o.width-n.x)*a.x,h=m.y+(o.height-n.y)*a.y;a.x<0&&(f=[d,d=f][0]),a.y<0&&(h=[e,e=h][0]),g=c(d,e,f,h)},setOrigin:function(a){e.isVector(a)&&(n.x=e.isNumber(a.x)?a.x:n.x,n.y=e.isNumber(a.y)?a.y:n.y,this.updateBoundingBox())},getOrigin:function(){return n},addChild:function(a,b){e.isDefined(b)?v[b]=a:e.isDefined(a.getName())?v[a.getName()]=a:v[a.getID()]=a,a.setParent(this),a.init&&a.init(),a.draw&&z.register("draw",a.draw,"base"),a.update&&z.register("update",a.update,"base")},getChild:function(a){return v[a]},setParent:function(a){w=a},getParent:function(a){return w=a},getID:function(){return x}};for(q;p>q;++q)(l=k[q])(z);return z}}),glue.module.create("glue/component/animatable",["glue","glue/math/vector","glue/basecomponent","glue/component/spritable"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q=c("animatable",a),r=d(a).spritable,s={},t=0,u=1,v=60,w=1/v,x=w,y=function(){l||(r.setImage(f.image),l=f.image),u=f.endFrame-f.startFrame,w=f.fps?1/f.fps:1/b.fps,x=w,j=f.startFrame,k=f.endFrame,t=j,m=f.loopCount||void 0,p=f.onComplete||void 0,n=0,o=!0};return q.set({setup:function(a){if(a){if(!a.animation)throw"Specify settings.animation";if(b=a.animation,a.animation.animations&&(s=a.animation.animations),!(e.isDefined(a.animation.frameCount)||e.isDefined(a.animation.frameWidth)&&e.isDefined(a.animation.frameHeight)))throw"Specify settings.animation.frameCount"}r.setup(a),a.image&&(l=a.image,g=a.animation.frameWidth||a.image.width/a.animation.frameCount,h=a.animation.frameHeight||a.image.height,i=a.image.width/g)},update:function(a){o&&(x-=a.deltaT,0>=x&&(x=w,++t,t>k&&(e.isDefined(m)&&(++n,n===m&&(o=!1,e.isDefined(p)&&p.call(this.animatable))),t=j)))},draw:function(b){{var c=(a.getPosition(),Math.floor(t/i)*h),d=t%i*g;a.getOrigin()}b.context.drawImage(l,d,c,g,h,0,0,g,h)},setAnimation:function(a){s[a]&&(f=s[a],y())},getDimension:function(){var b=a.getDimension();return b.width=g,b},getBoundingBox:function(){var b=a.getBoundingBox();return b.x2=b.x1+g,b},getFrameWidth:function(){return g},register:function(){q.register("draw"),q.register("update")},unregister:function(){q.unregister("draw"),q.unregister("update")}}),a}}),glue.module.create("glue/component/clickable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("clickable",a),d=function(b){return a.getBoundingBox().hasPosition(b.position)},e=function(b){d(b)&&(a.onClickDown&&a.onClickDown(b),a.onClick&&a.onClick(b))},f=function(b){d(b)&&a.onClickUp&&a.onClickUp(b)};return c.set({pointerDown:function(a){e(a)},pointerUp:function(a){f(a)},register:function(){c.register("pointerDown"),c.register("pointerUp")},unregister:function(){c.unregister("pointerDown"),c.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/draggable",["glue","glue/math/vector","glue/event/system","glue/basecomponent"],function(a,b,c,d){"use strict";var e=[],f=30;return function(a){var g,h=d("draggable",a),i=!1,j=b(0,0),k=function(a){var b,c=0,d=e.length,f=!0;for(c;d>c;++c)if(b=e[c],b!==a&&b.z>a.z){f=!1;break}return f},l=function(b){return a.getBoundingBox().hasPosition(b.position)},m=function(b){l(b)&&i===!1&&(e.push(a),setTimeout(function(){return k(a)?(i=!0,g=b.pointerId,j=b.position.substract(a.getPosition()),a.dragStart&&a.dragStart(b),!1):void 0},f))},n=function(b){i===!0&&g===b.pointerId&&(a.setPosition(b.position.substract(j)),a.dragMove&&a.dragMove(b))},o=function(b){return i===!0?(c.fire("draggable.drop",a,b),e=[],g=void 0,i=!1,a.dragEnd&&a.dragEnd(b,function(){}),!1):void 0};return h.set({pointerDown:function(a){m(a)},pointerMove:function(a){n(a)},pointerUp:function(a){o(a)},dragStartTimeout:function(a){f=a},register:function(){h.register("pointerDown"),h.register("pointerMove"),h.register("pointerUp")},unregister:function(){h.unregister("pointerDown"),h.unregister("pointerMove"),h.unregister("pointerUp")}}),a}}),glue.module.create("glue/component/droptarget",["glue","glue/event/system","glue/basecomponent"],function(a,b,c){"use strict";return function(a){var d=c("droptarget",a),e=function(b,c){return a.getBoundingBox().hasPosition(c.position)},f=function(b,c){e(a,c)&&a.onDrop&&a.onDrop(b,c)};return d.set({setup:function(){b.on("draggable.drop",f)},destroy:function(){b.off("draggable.drop",f)}}),a}}),glue.module.create("glue/component/fadable",["glue","glue/basecomponent"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e,f=b("fadable",a),g=!1,h=!1,i=.5,j=null;return f.set({update:function(a){var b=a.deltaT;g===!0?e-b*i>d?d+=i*b:(d=e,g=!1,null!==j&&j()):h===!0&&(d>e+b*i?d-=i*b:(d=e,h=!1,null!==j&&j()))},draw:function(a){a.context.globalAlpha=d},fade:function(a,b,f){d=b,e=f,g=f>b?!0:!1,h=b>f?!0:!1,c.isDefined(a)&&(j=a)},fadeIn:function(a,b){d=0,e=b||1,g=!0,c.isDefined(a)&&(j=a)},fadeOut:function(a,b){d=1,e=b||0,h=!0,c.isDefined(a)&&(j=a)},setAlpha:function(a){c.isNumber(a)&&(d=a)},getAlpha:function(){return d},setTargetAlpha:function(a){c.isNumber(a)&&(e=a)},getTargetAlpha:function(){return e},setFadeSpeed:function(a){c.isNumber(a)&&(i=a)},getFadeSpeed:function(){return i},atTarget:function(){return!g&&!h},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/hoverable",["glue","glue/basecomponent"],function(a,b){"use strict";return function(a){var c=b("hoverable",a),d="not hovered",e=function(b){return a.getBoundingBox().hasPosition(b.position)},f=function(b){e(b)?"not hovered"===d&&(a.hoverOver&&a.hoverOver(b),d="hovered"):"hovered"===d&&(a.hoverOut&&a.hoverOut(b),d="not hovered")};return c.set({pointerMove:function(a){f(a)},register:function(){c.register("pointerMove")},unregister:function(){c.unregister("pointerMove")}}),a}}),glue.module.create("glue/component/kineticable",["glue","glue/basecomponent","glue/math","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/math/circle","glue/sat"],function(a,b,c,d,e,f,g,h){"use strict";var i=a.sugar;return function(a){var j,k,l,m=b("kineticable",a),n=c(),o=d(0,0),p=d(0,0),q=d(0,0),r=d(0,0),s=d(0,0),t=e(0,0),u=!0,v=0,w=d(1,1);return m.set({setup:function(b){i.isDefined(b)&&(i.isDefined(b.gravity)&&this.setGravity(b.gravity),i.isDefined(b.bounce)&&this.setBounce(b.bounce),i.isDefined(b.velocity)&&this.setVelocity(b.velocity),i.isDefined(b.maxVelocity)&&this.setMaxVelocity(b.maxVelocity),i.isDefined(b.radius)&&this.setRadius(b.radius),i.isDefined(b.dynamic)&&this.setDynamic(b.dynamic)),q=a.getPosition(),k=a.getOrigin(),i.isDefined(a.scalable)&&(w=a.scalable.getScale()),t=i.isDefined(a.animatable)?a.animatable.getDimension():a.getDimension(),t.width*=w.x,t.height*=w.y,i.isUndefined(j)&&(l=Math.max(t.width,t.height),j=Math.sqrt(-l/2*(-l/2)+-l/2*(-l/2)))},update:function(){r.x=r.y=0,o.add(p),0!==s.x&&Math.abs(o.x)>s.x&&(o.x=s.x*n.sign(o.x)),0!==s.y&&Math.abs(o.y)>s.y&&(o.y=s.y*n.sign(o.y)),q.add(o),a.setPosition(q)},setVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";o=a},setGravity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";p=a},setDimension:function(a){if(!i.isDimension(t))throw"The argument must be a Dimension";t=a},setDynamic:function(a){if(!i.isBoolean(a))throw"The argument must be a Boolean";u=a},setBounce:function(a){if(!i.isNumber(a))throw"The argument must be a Number";v=a},setRadius:function(a){if(!i.isNumber(a))throw"The argument must be a Number";j=a},setPosition:function(b){if(!i.isVector(b))throw"The argument must be a Vector";a.setPosition(b)},setSide:function(a){if(!i.isVector(a))throw"The argument must be a Vector";r=a},setMaxVelocity:function(a){if(!i.isVector(a))throw"The argument must be a Vector";s=a},getVelocity:function(){return o},getGravity:function(){return p},getPosition:function(){return q},getDimension:function(){return t},isDynamic:function(){return u},getBounce:function(){return v},getRadious:function(){return j},getMaxVelocity:function(){return s},isTouching:function(a){return a===h.TOP&&r.y>0||a===h.BOTTOM&&r.y<0||a===h.LEFT&&r.x>0||a===h.RIGHT&&r.x<0},toRectangle:function(){return f(q.x-k.x*Math.abs(w.x),q.y-k.y*Math.abs(w.y),t.width,t.height)},toCircle:function(){return g(q.x+t.width/2,q.y+t.height/2,j)},getSide:function(){return r},register:function(){m.register("update")},unregister:function(){m.unregister("update")}}),a}}),glue.module.create("glue/component/movable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d,e=b("movable",a),f=null,g=100,h=!0,i=0;return e.set({update:function(b){var c=b.deltaT;if(null!==f){var e,j,k;d=a.getPosition(),j=f.x-d.x,k=f.y-d.y,Math.sqrt(j*j+k*k)<g*c?(h=!0,d=f,a.setPosition(d)):(e=Math.atan2(k,j),d.x+=Math.cos(e)*g*c,d.y+=Math.sin(e)*g*c,i=180*e/Math.PI,a.setPosition(d))}},hasTarget:function(){return null!==f},atTarget:function(){return h},getRotation:function(){return i},setTarget:function(a){if(!c.isObject(a)&&c.isDefined(a.x)&&c.isDefined(a.y))throw"Invalid target supplied";h=!1,f=a},setMoveSpeed:function(a){if(!c.isNumber(a))throw"Invalid speed supplied";g=a},register:function(){e.register("update")},unregister:function(){e.unregister("update")}}),a}}),glue.module.create("glue/component/plugin/spineable",["glue","glue/basecomponent","glue/math/rectangle","glue/math/vector","glue/math/dimension","glue/loader"],function(a,b,c,d,e,f){"use strict";var g=a.sugar;return function(a){var h,i=b("spineable",a),j={},k={},l={},m={},n={},o={},p="",q="",r=((new Date).getTime(),Array(8)),s=(c(0,0,0,0),{}),t={},u={},v={},w=function(b){var c=0;if(!g.isDefined(b))throw"Specify settings object to Spine";if(!g.isDefined(b.animation))throw"Specify animation to Spine";for("string"==typeof b.animation&&(b.animation=[b.animation]),c;c<b.animation.length;++c)p=b.animation[c],x(b.animation[c]),y(b.animation[c]);b.position&&a&&a.setPosition(b.position)},x=function(a){var b=f.getBinary(a),c={},d=f.getImage(a);j[p]=new spine.Atlas(b,{load:function(a){var b=d;a.image=b,a.width=b.width,a.height=b.height,c=a}}),j[p].updateUVs(c)},y=function(b){var c,d=0;for(l[p]=new spine.SkeletonJson(new spine.AtlasAttachmentLoader(j[p])),h.skeletonResolution&&(l[p].scale=h.skeletonResolution),m[p]=l[p].readSkeletonData(f.getJSON(b)),k[p]=new spine.Skeleton(m[p]),spine.Bone.yDown=!0,a&&(k[p].getRootBone().x=a.getPosition().x,k[p].getRootBone().y=a.getPosition().y),k[p].updateWorldTransform(),n[p]=new spine.AnimationStateData(m[p]),o[p]=new spine.AnimationState(n[p]),d;d<m[p].animations.length;++d){if(c=m[p].animations[d].name,g.has(v,c))throw"Animation with name "+c+" already exists";v[c]=p}z()},z=function(){var b=k[p],e=0,f=b.slots.length,g={},h={},i=c(0,0,0,0),j=b.getRootBone(),l=c(0,0,0,0);for(a&&(l.x1=a.getPosition().x,l.y1=a.getPosition().y),e;f>e;++e)g=b.slots[e],h=g.attachment,h instanceof spine.RegionAttachment&&(h.computeVertices(b.x,b.y,g.bone,r),i.x1=r[2],i.y1=r[3],i.setWidth(h.width),i.setHeight(h.height),l.union(i));s[p]=l,t[p]=d(0,0),t[p].x=l.x1-j.x,t[p].y=l.y1-j.y,u[p]=d(0,0),A()},A=function(){var b=s[p],c=b.getWidth(),d=b.getHeight();a&&a.setDimension(e(c,d))};return i.set({draw:function(b){var c,e,f,g,h,i,j,l,m,n,o,q,s=b.context,v={},w={},x=k[p],y=0,z=x.drawOrder.length,A=t[p],B=u[p],C=d(0,0);for(a&&(C=a.getPosition()),q=d(A.x+B.x,A.y+B.y),y;z>y;++y)v=x.drawOrder[y],w=v.attachment,w instanceof spine.RegionAttachment&&(w.computeVertices(x.x,x.y,v.bone,r),c=r[2]-q.x,e=r[3]-q.y,f=w.rendererObject.width,g=w.rendererObject.height,h=w.rendererObject.x,i=w.rendererObject.y,j=w.scaleX,l=w.scaleY,m=v.bone.scaleX,n=v.bone.scaleY,o=-(v.bone.worldRotation+w.rotation)*Math.PI/180,s.save(),s.translate(Math.round(c),Math.round(e)),s.rotate(o),s.globalAlpha=v.a,s.scale(m*j,n*l),s.drawImage(w.rendererObject.page.image,h,i,f,g,0,0,f,g),s.restore())},update:function(a){var b=k[p];return o[p].update(a.deltaT),o[p].apply(b),b.updateWorldTransform(),!0},setup:function(a){h=a,w(h)},setAnimation:function(b,c,d,e){if(!g.has(v,b))throw"There is no skeleton which contains an animation called "+b;return q===b?!1:(a.spineable.setSkeleton(v[b]),o[p].onComplete=g.isDefined(e)?e:null,g.isDefined(c)||(c=!0),g.isDefined(d)||(d=1),q=b,o[p].setAnimationByName(0,b,c),o[p].timeScale=d,k[p].setSlotsToSetupPose(),!0)},getAnimation:function(){return q},getRootBone:function(){return k[p].getRootBone()},getSkeletonResolution:function(){return l[p].scale},addSkeleton:function(a){w(a)},setSkeleton:function(a){p!==a&&(p=a,A())},getSkeleton:function(){return p},setOrigin:function(a,b){if(g.has(u,b))throw"This skeleton doesn't exist: "+b;u[b]=a,p===b&&A()},getOrigin:function(){return u[p]},resetOrigin:function(){u[p]={x:-t[p].x,y:-t[p].y},A()},register:function(){i.register("draw"),i.register("update")},unregister:function(){i.unregister("draw"),i.unregister("update")}}),a}}),glue.module.create("glue/component/rotatable",["glue","glue/basecomponent","glue/math/vector"],function(a,b){"use strict";var c=a.sugar;return function(a){var d=b("rotatable",a),e=0,f=100,g=0,h=1,i=180/Math.PI,j=!0,k=Math.PI/180;return d.set({update:function(b){var c,d,i,k,l=b.deltaT,m=a.rotatable;e!==g&&(c=m.getTargetDegree(),d=m.getAngleDegree(),i=f*h,k=c>d?c-d:d-c,Math.floor(Math.abs(k))<Math.abs(i*l)?(e=g,j=!0):(d+=i*l,m.setAngleDegree(d)))},draw:function(a){a.context.rotate(e)},setAngleDegree:function(a){e=c.isNumber(a)?a:e,e*=k},setAngleRadian:function(a){e=c.isNumber(a)?a:e},setTargetDegree:function(a,b){g=c.isNumber(a)?a:g,g*=k,c.isDefined(b)&&(h=b?1:-1),j=!1},setTargetRadian:function(a,b){g=c.isNumber(a)?a:g,c.isDefined(b)&&(h=b?1:-1),j=!1},setSpeed:function(a){f=c.isNumber(a)?a:f,f=Math.floor(f)},getAngleDegree:function(){return e*i},getAngleRadian:function(){return e},getTargetDegree:function(){return g*i},getTargetRadian:function(){return g},atTarget:function(){return j},register:function(){d.register("draw"),d.register("update")},unregister:function(){d.unregister("draw"),d.unregister("update")}}),a}}),glue.module.create("glue/component/scalable",["glue","glue/basecomponent","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";var e=a.sugar;return function(a){var f=b("scalable",a),g=c(1,1),h=c(1,1),i=1,j=!0;return f.set({update:function(a){if(!j){var b,c,d,e=a.deltaT,f=this.scalable;c=h.x-g.x,d=h.y-g.y,Math.sqrt(c*c+d*d)<i*e?(j=!0,f.setScale(h)):(b=Math.atan2(d,c),g.x+=Math.cos(b)*i*e,g.y+=Math.sin(b)*i*e)}},draw:function(a){a.context.scale(g.x,g.y)},setScale:function(b){g.x=e.isNumber(b.x)?b.x:g.x,g.y=e.isNumber(b.y)?b.y:g.y,h.x=e.isNumber(b.x)?b.x:h.x,h.y=e.isNumber(b.y)?b.y:h.y,a.updateBoundingBox()},setTarget:function(a){h.x=e.isNumber(a.x)?a.x:h.x,h.y=e.isNumber(a.y)?a.y:h.y,j=!1},setSpeed:function(a){i=e.isNumber(a)?a:i,i/=100},getScale:function(){return g},getTarget:function(){return h},getSpeed:function(){return 100*i},atTarget:function(){return j},getDimension:function(){var b;return b=e.isDefined(a.animatable)?a.animatable.getDimension():e.isDefined(a.spritable)?a.getDimension():d(1,1),d(b.width*g.x,b.height*g.y)},register:function(){f.register("draw"),f.register("update")},unregister:function(){f.unregister("draw"),f.unregister("update")}}),a}}),glue.module.create("glue/component/spritable",["glue","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/basecomponent"],function(a,b,c,d,e){"use strict";a.sugar;return function(a){var d=e("spritable",a),f=null;return d.set({setup:function(d){var e;d&&(d.image&&(f=d.image),f=d.image,d.position&&(e=d.position,a.setPosition(b(Math.round(e.x),Math.round(e.y)))),d.dimension?a.setDimension(d.dimension):f&&a.setDimension(c(f.naturalWidth,f.naturalHeight)),d.origin&&a.setOrigin(d.origin))},draw:function(b){a.animatable||b.context.drawImage(f,0,0)},setImage:function(b){f=b,a.setDimension(c(f.naturalWidth,f.naturalHeight))},getImage:function(){return f},register:function(){d.register("draw")},unregister:function(){d.unregister("draw")}}),a}}),glue.module.create("glue/component/tweenable",["glue","glue/basecomponent","glue/math"],function(a,b,c){"use strict";var d=a.sugar;return function(a){var e=b("tweenable",a),f=c(),g=["easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"];return e.set({getRandomTween:function(){var a=g[f.random(0,g.length)];return d.isString(a)?a:"easeInQuad"},easeInQuad:function(a,b,c,d){return c*(a/=d)*a+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOutQuad:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c,d){return c*(a/=d)*a*a+b},easeOutCubic:function(a,b,c,d){return c*((a=a/d-1)*a*a+1)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a+b:c/2*((a-=2)*a*a+2)+b},easeInQuart:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutQuart:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeInOutQuart:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(a,b,c,d){return c*(a/=d)*a*a*a*a+b},easeOutQuint:function(a,b,c,d){return c*((a=a/d-1)*a*a*a*a+1)+b},easeInOutQuint:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a*a+b:c/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b},easeOutSine:function(a,b,c,d){return c*Math.sin(a/d*(Math.PI/2))+b},easeInOutSine:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeInExpo:function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b},easeOutExpo:function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b},easeInOutExpo:function(a,b,c,d){return 0==a?b:a==d?b+c:(a/=d/2)<1?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b},easeOutCirc:function(a,b,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+b},easeInOutCirc:function(a,b,c,d){return(a/=d/2)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f))+b},easeOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return g*Math.pow(2,-10*a)*Math.sin(2*(a*d-e)*Math.PI/f)+c+b},easeInOutElastic:function(a,b,c,d){var e=1.70158,f=0,g=c;if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),g<Math.abs(c)){g=c;var e=f/4}else var e=f/(2*Math.PI)*Math.asin(c/g);return 1>a?-.5*g*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)+b:g*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-e)*Math.PI/f)*.5+c+b},easeInBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},easeOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},easeInOutBack:function(a,b,c,d,e){return void 0==e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},easeInBounce:function(a,b,c,d){return c-this.easeOutBounce(d-a,0,c,d)+b},easeOutBounce:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(a,b,c,d){return d/2>a?.5*this.easeInBounce(2*a,0,c,d)+b:.5*this.easeOutBounce(2*a-d,0,c,d)+.5*c+b}}),a}}),glue.module.create("glue/director",["glue","glue/game","glue/screen"],function(a,b){"use strict";var c=a.sugar,d={},e=null,f=function(a){return c.isString(a)&&c.isObject(d[a])?d[a]:void 0},g=function(a,d){var g,h,i,j=0;if(c.isString(a)){for(g=f(a),"show"===d&&b.add(g),"hide"===d&&b.remove(g),h=g.getObjects(),i=h.length,j;i>j;++j)"show"===d?b.add(h[j]):"hide"===d&&b.remove(h[j]);"show"===d&&(e=g)}},h={addScreen:function(a){c.isFunction(a.getName)&&c.isObject(a)&&(d[a.getName()]=a)},removeScreen:function(a){var b;c.isFunction(a.getName)&&c.isObject(a)&&(b=a.getName(),g(b,"hide")),c.isObject(d[b])&&delete d[b]},getScreens:function(){return d},showScreen:function(a){var b;c.isString(a)&&(null!==e&&(b=e.getName(),g(b,"hide")),g(a,"show"))
},hideScreen:function(a){c.isString(a)&&g(a,"hide")}};return h}),glue.module.create("glue/event/system",function(){var a=[],b=function(b,c,d){var e,f,g=a.length;if(g>0)for(e=0;g>e;++e)f=a[e],f&&f.name===c&&f.callback.apply({name:c,emitter:b},d)};return{on:function(b,c){return a.push({name:b,callback:c}),[b,c]},off:function(b,c){var d,e,f;for(d=0,e=a.length;e>d;++d)f=a[d],f&&f.name===b&&f.callback===c&&a.splice(d,1)},fire:function(a){b("system",a,Array.prototype.slice.call(arguments,1,arguments.length))}}}),glue.module.create("glue/game",["glue","glue/domready","glue/math/vector","glue/event/system","glue/loader"],function(a,b,c,d,e){"use strict";var f,g,h=a.sugar,i=null,j=null,k=[],l=[],m=[],n=[],o=[],p=(new Date).getTime(),q=null,r=null,s=null,t=null,u=!1,v=null,w={},x=c(0,0),y=!1,z=!1,A=null,B=0,C=0,D=5e5,E=!0,F=0,G={},H=function(){q=document.querySelector("#"+g),null===q&&(q=document.createElement("canvas"),q.id=g,q.width=v.width,q.height=v.height,null!==document.getElementById("wrapper")?document.getElementById("wrapper").appendChild(q):document.body.appendChild(q)),I(),q.getContext&&(u=!0,r=q.getContext("2d"),s=document.createElement("canvas"),s.width=q.width,s.height=q.height,t=s.getContext("2d")),G={canvas:q,context:r,backBufferCanvas:s,backBufferContext2D:t,canvasScale:w,canvasDimension:v,scroll:x}},I=function(){var a,b,c=q.height/q.width,d=window.innerHeight/window.innerWidth;c>d?(b=window.innerHeight,a=b/c):(a=window.innerWidth,b=a*c),w.x=a/v.width,w.y=b/v.height,q.style.width=a+"px",q.style.height=b+"px"},J=function(){F===ab.SORT_TYPE_STABLE?h.sort.stable.inplace(k,function(a,b){return a.z-b.z}):k.sort(function(a,b){return a.z-b.z})},K=function(){var a,b,c,d;if(l.length){for(c=0;c<l.length;++c)a=l[c],k.push(l[c]),a.init&&a.init();if(l=[],n.length){for(d=0;d<n.length;++d)b=n[d],b&&b.callback(b.object);n=[]}}},L=function(){var a,b,c,d;if(m.length){for(c=0;c<m.length;++c)a=m[c],a.destroy&&a.destroy(),h.removeObject(k,a);if(m=[],o.length){for(d=0;d<o.length;++d)b=o[d],b&&b.callback(b.object);o=[]}}},M=function(){t.clear(!0),r.clear(!0)},N=function(a){var b,c,d,e;if(y&&requestAnimationFrame(N),u){if(E&&J(),M(),L(),K(),b=(a-p)/1e3,z&&(c=Math.round(1e3/(a-p),2),B+=c,++C,e=Math.round(B/C),B>D&&(B=C=0),A.innerHTML="<strong>Glue debug bar</strong>",A.innerHTML+="<br />version: 0.9.7",A.innerHTML+="<br />frame rate: "+c+" fps",A.innerHTML+="<br />average frame rate: "+e+"fps",A.innerHTML+="<br />objects: "+k.length,f&&f.name&&(A.innerHTML+="<br />game name: "+f.name)),1>b){G.deltaT=b,G.fps=c,G.avg=e,G.objectLength=k.length;for(var g=0;g<k.length;++g)d=k[g],d.update&&d.update(G),d.draw&&d.draw(G)}r.drawImage(s,0,0),p=a}},O=function(){H(),$(),N(0)},P=function(a){var b,c,d;for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerDown&&d.pointerDown(a)},Q=function(a){var b,c,d;for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerMove&&d.pointerMove(a)},R=function(a){var b,c,d;for(b=0,c=k.length;c>b;++b)d=k[b],d.pointerUp&&d.pointerUp(a)},S=function(a,b){var d=b?a.changedTouches[0]:a.targetTouches[0];a.preventDefault(),a.position=c((d.pageX-q.offsetLeft)/w.x,(d.pageY-q.offsetTop)/w.y)},T=function(a){a.position=c((a.clientX-q.offsetLeft)/w.x,(a.clientY-q.offsetTop)/w.y)},U=function(a){a.preventDefault(),S(a),P(a)},V=function(a){a.preventDefault(),S(a),Q(a)},W=function(a){a.preventDefault(),S(a,!0),R(a)},X=function(a){a.preventDefault(),T(a),P(a)},Y=function(a){a.preventDefault(),T(a),Q(a)},Z=function(a){a.preventDefault(),T(a),R(a)},$=function(){"ontouchstart"in i?(q.addEventListener("touchstart",U),q.addEventListener("touchmove",V),q.addEventListener("touchend",W)):(q.addEventListener("mousedown",X),q.addEventListener("mousemove",Y),q.addEventListener("mouseup",Z)),d.on("glue.pointer.down",P),d.on("glue.pointer.move",Q),d.on("glue.pointer.up",R),window.addEventListener("resize",I,!1),window.addEventListener("orientationchange",I,!1),document.body.addEventListener("touchstart",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1}),document.body.addEventListener("touchmove",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1})},_=function(){q.removeEventListener("touchstart",U),q.removeEventListener("touchmove",V),q.removeEventListener("touchend",W),d.off("glue.pointer.down",P),d.off("glue.pointer.move",Q),d.off("glue.pointer.up",R)},ab={SORT_TYPE_DEFAULT:0,SORT_TYPE_STABLE:1,setup:function(a,c){b(function(){if(y)throw"Glue: The main game is already running";y=!0,i=window,j=i.document,g=a.canvas.id,v=a.canvas.dimension,a.game&&(f=a.game),a.develop&&a.develop.debug&&(z=!0,A=document.createElement("div"),A.id="debugBar",document.body.appendChild(A)),h.isDefined(a.sort)&&(E=a.sort),h.isDefined(a.sortType)&&(F=a.sortType),a.asset&&a.asset.path?(e.setAssetPath(a.asset.path),a.asset.image&&e.setAssets(e.ASSET_TYPE_IMAGE,a.asset.image),a.asset.audio&&(a.asset.audio.sprite&&e.setAssets(e.ASSET_TYPE_AUDIOSPRITE,a.asset.audio.sprite),e.setAssets(e.ASSET_TYPE_AUDIO,a.asset.audio)),a.asset.json&&e.setAssets(e.ASSET_TYPE_JSON,a.asset.json),a.asset.binary&&e.setAssets(e.ASSET_TYPE_BINARY,a.asset.binary),a.asset.spine&&e.setAssets(e.ASSET_TYPE_SPINE,a.asset.spine),e.load(function(){O(),c&&c()})):(O(),c&&c())})},shutdown:function(){_(),y=!1},add:function(a,b){b&&n.push({object:a,callback:b}),l.push(a)},remove:function(a,b){b&&o.push({object:a,callback:b}),m.push(a)},get:function(a){var b,c,d,e;for(b=0,c=k.length;c>b;++b)if(d=k[b],e=d.getName(),!h.isEmpty(e)&&e===a)return d},canvas:{getDimension:function(){return v},getScale:function(){return w},getContext:function(){return t}},getObjectCount:function(){return k.length},getScroll:function(){return x}};return ab}),glue.module.create("glue/loader",["glue"],function(a){var b,c,d=a.audio,e=a.sugar,f=!1,g=0,h=0,i=null,j={},k={image:{},audio:{},json:{},binary:{}},l=document.getElementById("loader"),m=document.getElementById("loadbar"),n=document.getElementById("percentagebar"),o=function(){++h,c=Math.floor(h/g*100),null!==m&&(m.style.width=c+"%"),null!==n&&(n.innerHTML=c+"%"),g===h&&(null!==l&&(l.style.display="none"),f=!0,b())},p=function(a){throw"An error occurred while trying to load asset "+a},q=function(a,b,c){var d=new Image;d.src=b,d.addEventListener("load",c,!1),k.image[a]=d},r=function(a,b,c){var e=new d({urls:[b],onload:c});k.audio[a]=e},s=function(a,b,c,d){var e=new XMLHttpRequest;e.overrideMimeType&&e.overrideMimeType("application/json"),e.open("GET",b,!0),e.onerror=function(){d(a)},e.ontimeout=function(){d(a)},e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status&&e.responseText?(k.json[a]=JSON.parse(e.responseText),c()):d(a))},e.send(null)},t=function(a,b,c,d){var e,f,g,h=new XMLHttpRequest,i=0;h.open("GET",b,!0),h.onerror=function(){d(a)},h.responseType="arraybuffer",h.onload=function(){if(e=h.response){for(f=new Uint8Array(e),g=[],i;i<f.byteLength;++i)g[i]=String.fromCharCode(f[i]);k.binary[a]=g.join(""),c()}},h.send()},u=function(a,b,c,e){var f,g,h=function(){g=k.json[a+"_json"],g.onload=function(){k.audio[a]=f,c()},f=new d(g),c()};s(a+"_json",i+"json/"+b,h,e)},v=function(a,b,c,d){var e=!1,f=!1,g=!1,h=function(){e&&f&&g&&c()};q(a,b+".png",function(){e=!0,h()},d),t(a,b+".atlas",function(){g=!0,h()},d),s(a,b+".json",function(){f=!0,h()},d)},w=function(a,b,c){switch(b){case x.ASSET_TYPE_IMAGE:q(a,i+"image/"+c,o,p);break;case x.ASSET_TYPE_AUDIO:r(a,i+"audio/"+c,o,p);break;case x.ASSET_TYPE_JSON:s(a,i+"json/"+c,o,p);break;case x.ASSET_TYPE_BINARY:t(a,i+"binary/"+c,o,p);break;case x.ASSET_TYPE_AUDIOSPRITE:u(a,c,o,p);break;case x.ASSET_TYPE_SPINE:v(a,i+"spine/"+c,o,p)}},x={ASSET_TYPE_IMAGE:"image",ASSET_TYPE_AUDIO:"audio",ASSET_TYPE_JSON:"json",ASSET_TYPE_BINARY:"binary",ASSET_TYPE_AUDIOSPRITE:"audiosprite",ASSET_TYPE_SPINE:"spine",setAssetPath:function(a){i=a},setAssets:function(a,b){j[a]=b;for(asset in b)b.hasOwnProperty(asset)&&++g},load:function(a){var c;null!==n&&(n.innerHTML="0%"),b=a;for(type in j)if(j.hasOwnProperty(type)){c=j[type];for(name in c)c.hasOwnProperty(name)&&w(name,type,c[name])}},isLoaded:function(){return f},getAssets:function(){if(!f)throw"Assets are not loaded yet";return k},getImage:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.image[a]},getAudio:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.audio[a]},getJSON:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.json[a]},getBinary:function(a){if(!f)throw"Asset "+a+" is not loaded yet";return k.binary[a]},getAsset:function(a){if(!f)throw"Asset "+a+" is not loaded yet";if(e.has(k.image,a))return k.image[a];if(e.has(k.audio,a))return k.audio[a];if(e.has(k.json,a))return k.json[a];if(e.has(k.binary,a))return k.binary[a];throw"Asset "+a+" could not be found"}};return x}),glue.module.create("glue/math",["glue","glue/math/rectangle","glue/math/dimension","glue/math/matrix","glue/math/vector"],function(a,b,c,d,e){"use strict";return function(){var f=a.sugar;return{Dimension:c,Matrix:d,Vector:e,random:function(a,b){return~~(Math.random()*(b-a+1))+a},square:function(a){return a*a},sign:function(a){if(f.isNumber(a)){if(a>0)return 1;if(0>a)return-1;if(0===a)return 0}},getHalfRectangle:function(a){var c=b(a.x1+a.x2/2,a.y1+a.y2/2,a.x2/2,a.y2/2);return c}}}}),glue.module.create("glue/math/circle",["glue"],function(a){var b=a.sugar,c=function(a,d,e){return{x:a||0,y:d||0,radius:e||0,addVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x+=a.x,this.y+=a.y},substractVector:function(a){if(!b.isVector(a))throw"The argument should be a Vector";this.x-=a.x,this.y-=a.y},clone:function(){return c(this.x,this.y,this.radius)}}};return c}),glue.module.create("glue/math/dimension",function(){"use strict";return function(a,b,c){var d={width:a,height:b,depth:c||0};return{width:d.width,height:d.height,depth:d.depth,get:function(){return d}}}}),glue.module.create("glue/math/matrix",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c,d){var e,f,g,h=[];for(f=0;a>f;++f){for(e=[],g=0;c>g;++g)e[g]=d||null;h[f]=e}return{get:function(){return h},getValue:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:void 0},iterate:function(d){for(f=0;a>f;++f)for(g=0;c>g;++g){if(!b.isFunction(d))throw"Please supply a callback function";d(f,g,h[f][g])}},set:function(a,b,c){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=c)},unset:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=null)}}}}),glue.module.create("glue/math/polygon",function(){"use strict";return function(a){return{get:function(){return a},hasPosition:function(b){var c,d=!1,e=a[0].x,f=a[0].x,g=a[0].y,h=a[0].y,i=1,j=0,k=a.length-1;for(i=1;i<a.length;++i)c=a[i],e=Math.min(c.x,e),f=Math.max(c.x,f),g=Math.min(c.y,g),h=Math.max(c.y,h);if(b.x<e||b.x>f||b.y<g||b.y>h)return!1;for(k;j<a.length;k=j++)a[j].y>b.y!=a[k].y>b.y&&b.x<(a[k].x-a[j].x)*(b.y-a[j].y)/(a[k].y-a[j].y)+a[j].x&&(d=!d);return d}}}}),glue.module.create("glue/math/rectangle",function(){"use strict";return function(a,b,c,d){return{x1:a,y1:b,x2:c,y2:d,get:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}},hasPosition:function(a){return a.x>=this.x1&&a.x<=this.x2&&a.y>=this.y1&&a.y<=this.y2?!0:void 0},getWidth:function(){return this.x2-this.x1},getHeight:function(){return this.y2-this.y1},setWidth:function(a){this.x2=this.x1+a},setHeight:function(a){this.y2=this.y1+a},union:function(a){this.x1=Math.min(this.x1,a.x1),this.y1=Math.min(this.y1,a.y1),this.x2=Math.max(this.x2,a.x2),this.y2=Math.max(this.y2,a.y2)},intersect:function(a){return this.x1+this.x2>a.x1&&this.x1<a.x1+a.x2&&this.y1+this.y2>a.y1&&this.y1<a.y1+a.y2},intersection:function(a){var b={x1:0,y1:0,x2:0,y2:0};return this.intersect(a)&&(b.x1=Math.max(this.x1,a.x1),b.y1=Math.max(this.y1,a.y1),b.x2=Math.min(this.x1+this.x2,a.x1+a.x2)-b.x1,b.y2=Math.min(this.y1+this.y2,a.y1+a.y2)-b.y1),b}}}}),glue.module.create("glue/math/vector",["glue/math"],function(a){"use strict";var b=function(c,d,e){var f=a();return{x:c,y:d,z:e||0,get:function(){return{x:this.x,y:this.y,z:this.z}},add:function(a){return this.x+=a.x,this.y+=a.y,this},substract:function(a){return this.x-=a.x,this.y-=a.y,this},angle:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},dotProduct:function(a){return this.x*a.x+this.y*a.y},distance:function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))},multiply:function(a){return this.x*=a.x,this.y*=a.y,this},scale:function(a){return this.x*=a,this.y*=a,this},length:function(){return Math.sqrt(f.square(this.x)+f.square(this.y))},normalize:function(a){return this.x/=a>0?a:1,this.y/=a>0?a:1,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return b(this.x,this.y)},"static":{add:function(a,b){var c=a.clone();return c.add(b),c},substract:function(a,b){var c=a.clone();return c.substract(b),c},angle:function(a,b){return a.angle(b)},dotProduct:function(a,b){return a.dotProduct(b)},distance:function(a,b){return a.distance(b)},multiply:function(a,b){var c=a.clone();return c.multiply(b),c},scale:function(a,b){var c=a.clone();return c.scale(b),c},length:function(a){var b=a.clone();return b.length()},normalize:function(a,b){var c=a.clone();return c.normalize(b),c},copy:function(a,b){var c=a.clone();return c.copy(b),c},clone:function(a){return a.clone()}}}};return b}),glue.module.create("glue/sat",["glue","glue/math","glue/math/vector","glue/math/rectangle","glue/math/dimension","glue/game"],function(a,b,c,d){"use strict";var e=a.sugar,f=b(),g=function(a,b,c,d){var e;return c.copy(a),c.substract(b),e=c.length(),e>a.radius+b.radius?(c.x=c.y=0,!1):(c.normalize(e),d.copy(c),c.scale(a.radius+b.radius-e),!0)},h=function(a,b,d,e,g){if(a.intersect(b)){var h=a.intersection(b),i=c(0,0);return h.x2>h.y2?(i.y=f.sign(a.y1-b.y1),d.y+=h.y2*i.y,e.y=i.y):(i.x=f.sign(a.x1-b.x1),d.x+=h.x2*i.x,e.x=i.x),g.x1=h.x1,g.y1=h.y1,g.x2=h.x2,g.y2=h.y2,!0}return!1},i=function(a,b){return a.intersect(b)},j=function(a,b){var c=Math.sqrt(f.square(a.x-b.x)+f.square(a.y-b.y));return c<a.radius+b.radius},k=function(a,b){var c=a.kineticable.getVelocity(),d=a.kineticable.getBounce(),e=b.scale(c.dotProduct(b)),f=c.static.substract(c,e),g=f.substract(e),h=g.substract(c).scale(d);c.add(h),a.kineticable.setVelocity(c)},l=function(a,b){var d,e,f=a.kineticable.toCircle(),h=b.kineticable.toCircle(),i=c(0,0),j=c(0,0),l=c(0,0),m=c(0,0);return g(f,h,j,m)?(b.kineticable.isDynamic()&&(e=b.kineticable.getPosition(),e.substract(j),k(b,m)),a.kineticable.isDynamic()&&(g(h,f,i,l),d=a.kineticable.getPosition(),d.substract(i),k(a,l)),!0):!1},m=function(a,b){var e,f,g,i,j=a.kineticable.toRectangle(),k=b.kineticable.toRectangle(),l=c(0,0),m=c(0,0),n=c(0,0),o=c(0,0),p=d(0,0,0,0);return h(j,k,m,o,p)?(b.kineticable.isDynamic()&&(f=b.kineticable.getVelocity(),i=b.kineticable.getPosition(),i.substract(m),o.scale(-1),b.kineticable.setPosition(i),b.kineticable.setSide(o),0!==o.y?(o.y>0&&f.y<0||o.y<0&&f.y>0&&p.y2>1)&&(f.y*=-b.kineticable.getBounce()):0!==o.x&&(o.x>0&&f.x<0||o.x<0&&f.x>0&&p.x2>1)&&(f.x*=-b.kineticable.getBounce())),a.kineticable.isDynamic()&&(e=a.kineticable.getVelocity(),g=a.kineticable.getPosition(),h(k,j,l,n,p),g.substract(l),n.scale(-1),a.kineticable.setPosition(g),a.kineticable.setSide(n),0!==n.y?(n.y>0&&e.y<0||n.y<0&&e.y>0)&&(e.y*=-a.kineticable.getBounce()):0!==n.x&&(n.x>0&&e.x<0||n.x<0&&e.x>0)&&(e.x*=-a.kineticable.getBounce())),!0):!1},n={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,RECTANGLE_TO_RECTANGLE:10,CIRCLE_TO_CIRCLE:20,collideGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.collideGroup(a[d],b,c)},collideGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.collide(a,b[d],c)},collide:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return m(a,b);case n.CIRCLE_TO_CIRCLE:return l(a,b);default:throw"The type of collision is not valid."}return!1}throw"Collisions can only be tested between Kineticable."},overlap:function(a,b,c){if(e.isDefined(a.kineticable)&&e.isDefined(b.kineticable)){switch(c=c||n.RECTANGLE_TO_RECTANGLE){case n.RECTANGLE_TO_RECTANGLE:return i(a,b);case n.CIRCLE_TO_CIRCLE:return j(a,b);default:return i(a,b)}return!1}throw"Collisions can only be tested between Kineticable."},overlapGroupVsGroup:function(a,b,c){var d,f;if(!e.isArray(a)||!e.isArray(b))throw"The colliding groups must be Arrays.";for(d=0,f=a.length;f>d;++d)n.overlapGroup(a[d],b,c)},overlapGroup:function(a,b,c){var d,f;if(!e.isArray(b))throw"The colliding group must be an Array.";if(!e.isDefined(a.kineticable))throw"Collisions can only be tested between Kineticable.";for(d=0,f=b.length;f>d;++d)b.indexOf(a)!==d&&n.overlap(a,b[d],c)},update:function(){}};return n}),glue.module.create("glue/screen",["glue"],function(a){"use strict";var b=a.sugar;return function(a){var c=[],d={addObject:function(a){b.isObject(a)&&c.push(a)},removeObject:function(a){var d;b.isObject(a)&&(d=c.indexOf(a),d>=0&&c.splice(d,1))},getObjects:function(){return c},getName:function(){return a}};return d}}),glue.module.create("glue/spatial",["glue","glue/game","glue/math","glue/math/vector","glue/math/dimension"],function(a,b,c,d){"use strict";return function(){var e,f,g,h=a.sugar,i=(c(),function(a,b){var c=parseInt(Math.floor(a.x/f)+Math.floor(a.y/f)*(e.width/f));h.contains(b,c)||b.push(c)}),j=function(a){var b=[],c=a.spritable.getPosition(),e=a.spritable.getDimension(),f=d(c.x,c.y),g=d(c.x+e.width,c.y+e.height);return i(d(f.x,f.y),b),i(d(g.x,f.y),b),i(d(g.x,g.y),b),i(d(f.x,g.y),b),b},k=function(){var a,b=0;for(g={},a=e.width/f*(e.height/f),b;a>b;++b)g[b]=[]},l={setup:function(a){a=a||{},e=h.isDefined(a.gridDimension)?a.gridDimension:b.canvas.getDimension(),f=h.isDefined(a.gridSize)?a.gridSize:e.height/3,k()},setDebug:function(a){a===!0&&b.add(l),a===!1&&b.remove(l)},clearObjects:function(){k()},addObject:function(a){var b=j(a),c=0,d=b.length;for(c;d>c;++c)g[b[c]].push(a)},addArray:function(a){var b,c;for(b=0,c=a.length;c>b;++b)l.addObject(a[b])},getNearbyObjects:function(a){var b=[],c=j(a),d=0,e=c.length;for(d;e>d;++d)b.push(g[c[d]]);return b},handleNearbyObjects:function(a,b){var c,d,e,f,g;if(h.isFunction(b))for(c=l.getNearbyObjects(a),d=0,e=c.length;e>d;++d)if(c[d])for(f=0,g=c[d].length;g>f;++f)c[d].indexOf(a)!==f&&b(c[d][f])},draw:function(a,b){var c=0,d=0;for(b.save(),b.beginPath(),c;c<=e.width;c+=f)b.moveTo(c,0),b.lineTo(c,e.height);for(d;d<=e.height;d+=f)b.moveTo(0,d),b.lineTo(e.width,d);b.strokeStyle="black",b.stroke(),b.closePath(),b.restore()}};return l}});var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return m(a.width)&&m(a.height)},d=function(a){return m(a.x)&&m(a.y)},e=function(a){return q(a,"get")&&i(a.get)&&q(a,"getValue")&&i(a.getValue)&&q(a,"iterate")&&i(a.iterate)&&q(a,"set")&&i(a.iterate)&&q(a,"unset")&&i(a.iterate)?!0:void 0},f=function(a){return"string"==typeof a||a instanceof String},g=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h=function(a){return"[object Object]"===Object.prototype.toString.call(a)},i=function(a){return"[object Function]"===Object.prototype.toString.call(a)},j=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},k=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},l=function(){},m=function(a){return"[object Number]"===Object.prototype.toString.call(a)},n=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},o=function(a){return"[object Date]"===Object.prototype.toString.call(a)},p=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},q=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},r=function(a){return void 0===a},s=function(a){return void 0!==a},t=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},u=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},v=function(a,b){return a+Math.floor(Math.random()*(b-a+1))},w=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},x=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},y=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(this.has(a,c)&&(a.base=a.base||{},a.base[c]=a[c]),a[c]=this.isObject(b[c])?this.combine({},b[c]):b[c]);return a},z=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},A=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},B=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},C=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},D=function(a){return!(!a||1!==a.nodeType)},E=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},F=function(a){return this.combine({},a,!0)},G=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},H=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},I=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},J=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},K=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},L=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},M=function(a){return typeof a==typeof Function},N=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=N(a,c,e)),d&&(d.style.display=""),e},O=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),T(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},P=function(a,b){return a.getAttribute("data-"+b)},Q=function(a,b,c){return a.setAttribute("data-"+b,c)},R=function(a,c){return(R=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)})(a,c)},S=function(a,c){var d,e,f=this;return(S=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!R(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b})(a,c)},T=function(a,c){return(T=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")})(a,c)},U=function(a){a.className="",a.setAttribute("class","")},V=function(a,c){return(V=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return R(a,b)?(T(a,b),!1):(S(a,b),!0)})(a,c)},W=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},X=function(a){return b.querySelector(a)},Y=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},Z=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},$=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)},_=function(){var a=function(a,c){return b(a.slice(),c)},b=function(a,b){"function"!=typeof b&&(b=function(a,b){return String(a).localeCompare(b)});var d=a.length;if(1>=d)return a;for(var e=new Array(d),f=1;d>f;f*=2){c(a,b,f,e);var g=a;a=e,e=g}return a},c=function(a,b,c,d){var e,f,g,h,i,j=a.length,k=0,l=2*c;for(e=0;j>e;e+=l)for(f=e+c,g=f+c,f>j&&(f=j),g>j&&(g=j),h=e,i=f;;)if(f>h&&g>i)d[k++]=b(a[h],a[i])<=0?a[h++]:a[i++];else if(f>h)d[k++]=a[h++];else{if(!(g>i))break;d[k++]=a[i++]}};return a.inplace=function(a,d){var e=b(a,d);return e!==a&&c(e,null,a.length,a),a},a}();return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),CanvasRenderingContext2D.prototype.clear=CanvasRenderingContext2D.prototype.clear||function(a){a&&(this.save(),this.setTransform(1,0,0,1,0,0)),this.clearRect(0,0,this.canvas.width,this.canvas.height),a&&this.restore()},{isVector:d,isDimension:c,isMatrix:e,isString:f,isArray:g,isObject:h,isFunction:i,emptyFn:l,isNumber:m,isBoolean:n,isDate:o,isInt:p,has:q,isUndefined:r,isDefined:s,isEmpty:t,isArgument:u,getRandom:v,upperFirst:w,multiIs:x,combine:y,imports:k,isDomList:z,toArray:A,contains:B,indexOf:C,isElement:D,size:E,clone:F,isRegex:G,keys:H,once:I,memoize:J,removeObject:K,getStyle:L,isFunctionByType:M,getNodeOnPoint:N,getNodesOnPoint:O,getData:P,setData:Q,containsClass:R,addClass:S,removeClass:T,removeClasses:U,toggleClass:V,triggerEvent:W,$:X,setAnimationFrameTimeout:Y,animationEvent:Z,domReady:$,arrayMatch:j,sort:{stable:_}}}(window,window.document),glue.module.create("glue/domready",function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d});