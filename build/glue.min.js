var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){(c||!hasProp(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),mixin(a[e],b,c,d)):a[e]=b)}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;a[b];b+=1)if(c=a[b],"."===c)a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=p,r=x.map,s=r&&r["*"];if(a&&"."===a.charAt(0)&&(c?(q=getOwn(x.pkgs,c)?p=[c]:p.slice(0,p.length-1),a=q.concat(a.split("/")),b(a),f=getOwn(x.pkgs,e=a[0]),a=a.join("/"),f&&a===e+"/"+f.main&&(a=e)):0===a.indexOf("./")&&(a=a.substring(2))),d&&r&&(p||s)){for(h=a.split("/"),i=h.length;i>0;i-=1){if(k=h.slice(0,i).join("/"),p)for(j=p.length;j>0;j-=1)if(g=getOwn(r,p.slice(0,j).join("/")),g&&(g=getOwn(g,k))){l=g,m=i;break}if(l)break;!n&&s&&getOwn(s,k)&&(n=getOwn(s,k),o=i)}!l&&n&&(l=n,m=o),l&&(h.splice(0,m,l),a=h.join("/"))}return a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.require([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(E+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):c(a,l,e):(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(F+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c,f,g=1e3*x.waitSeconds,h=g&&u.startTime+g<(new Date).getTime(),i=[],k=[],l=!1,o=!0;if(!s){if(s=!0,eachProp(z,function(c){if(a=c.map,b=a.id,c.enabled&&(a.isDefine||k.push(c),!c.error))if(!c.inited&&h)e(b)?(f=!0,l=!0):(i.push(b),d(b));else if(!c.inited&&c.fetched&&a.isDefine&&(l=!0,!a.prefix))return o=!1}),h&&i.length)return c=makeError("timeout","Load timeout for modules: "+i,null,i),c.contextName=u.contextName,j(c);o&&each(k,function(a){m(a,{},{})}),h&&!f||!l||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E=1,F=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b,c=getOwn(x.pkgs,a.map.id);return b=c?getOwn(x.config,a.map.id+"/"+c.main):getOwn(x.config,a.map.id),b||{}},exports:C[a.map.id]}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?(u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})),void 0):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(g){a=g}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&(b=this.module,b&&void 0!==b.exports&&b.exports!==this.exports?e=b.exports:void 0===e&&this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=this.map.name,n=this.map.parentMap?this.map.parentMap.name:null,o=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(m=d.normalize(m,function(a){return c(a,n,!0)})||""),f=g(a.prefix+"!"+m,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),k=getOwn(y,f.id),k&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()),void 0):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(l){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+l,l,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),o([f],e)}),d.load(a.name,o,e,x),void 0)})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return this.depExports[b]=e(this),void 0;this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.pkgs,c=x.shim,d={paths:!0,config:!0,map:!0};eachProp(a,function(a,b){d[b]?"map"===b?(x.map||(x.map={}),mixin(x[b],a,!0,!0)):mixin(x[b],a,!0):x[b]=a}),a.shim&&(eachProp(a.shim,function(a,b){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),c[b]=a}),x.shim=c),a.packages&&(each(a.packages,function(a){var c;a="string"==typeof a?{name:a}:a,c=a.location,b[a.name]={name:a.name,location:c||a.name,main:(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),x.pkgs=b),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);d(a),delete C[a],delete D[c.url],delete A[a],e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){var b=getOwn(y,a.id);b&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k,l;if(req.jsExtRegExp.test(a))k=a+(b||"");else{for(d=x.paths,e=x.pkgs,h=a.split("/"),i=h.length;i>0;i-=1){if(j=h.slice(0,i).join("/"),f=getOwn(e,j),l=getOwn(d,j)){isArray(l)&&(l=l[0]),h.splice(0,i,l);break}if(f){g=a===f.name?f.location+"/"+f.main:f.location,h.splice(0,i,g);break}}k=h.join("/"),k+=b||(/^data\:|\?/.test(k)||c?"":".js"),k=("/"===k.charAt(0)||k.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+k}return x.urlArgs?k+((-1===k.indexOf("?")?"?":"&")+x.urlArgs):k},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(f){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,f,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript(),d&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")])),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),function(){var a,b;!function(){var c={},d={};a=function(a,b,d){c[a]={deps:b,callback:d}},b=function(a){if(d[a])return d[a];d[a]={};var e=c[a];if(!e)throw new Error("Module '"+a+"' not found.");for(var f,g=e.deps,h=e.callback,i=[],j=0,k=g.length;k>j;j++)"exports"===g[j]?i.push(f={}):i.push(b(g[j]));var l=h.apply(this,i);return d[a]=f||l}}(),a("rsvp/all",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){if("[object Array]"!==toString.call(a))throw new TypeError("You must pass an array to all.");return new d(function(b,c){function d(a){return function(b){e(a,b)}}function e(a,c){g[a]=c,0===--h&&b(g)}var f,g=[],h=a.length;0===h&&b([]);for(var i=0;i<a.length;i++)f=a[i],f&&"function"==typeof f.then?f.then(d(i),c):e(i,f)})}var d=a.Promise;b.all=c}),a("rsvp/async",["exports"],function(a){"use strict";function b(){return function(a,b){process.nextTick(function(){a(b)})}}function c(){return function(a,b){setImmediate(function(){a(b)})}}function d(){var a=[],b=new h(function(){var b=a.slice();a=[],b.forEach(function(a){var b=a[0],c=a[1];b(c)})}),c=document.createElement("div");return b.observe(c,{attributes:!0}),window.addEventListener("unload",function(){b.disconnect(),b=null},!1),function(b,d){a.push([b,d]),c.setAttribute("drainQueue","drainQueue")}}function e(){return function(a,b){setTimeout(function(){a(b)},1)}}var f,g="undefined"!=typeof window?window:{},h=g.MutationObserver||g.WebKitMutationObserver;f="function"==typeof setImmediate?c():"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():h?d():e(),a.async=f}),a("rsvp/config",["rsvp/async","exports"],function(a,b){"use strict";var c=a.async,d={};d.async=c,b.config=d}),a("rsvp/defer",["rsvp/promise","exports"],function(a,b){"use strict";function c(){var a={resolve:void 0,reject:void 0,promise:void 0};return a.promise=new d(function(b,c){a.resolve=b,a.reject=c}),a}var d=a.Promise;b.defer=c}),a("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){this.type=a;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},c=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c][0]===b)return c;return-1},d=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b},e={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a},on:function(a,b,e){var f,g,h=d(this);for(a=a.split(/\s+/),e=e||this;g=a.shift();)f=h[g],f||(f=h[g]=[]),-1===c(f,b)&&f.push([b,e])},off:function(a,b){var e,f,g,h=d(this);for(a=a.split(/\s+/);f=a.shift();)b?(e=h[f],g=c(e,b),-1!==g&&e.splice(g,1)):h[f]=[]},trigger:function(a,c){var e,f,g,h,i,j=d(this);if(e=j[a])for(var k=0;k<e.length;k++)f=e[k],g=f[0],h=f[1],"object"!=typeof c&&(c={detail:c}),i=new b(a,c),g.call(h,i)}};a.EventTarget=e}),a("rsvp/hash",["rsvp/defer","exports"],function(a,b){"use strict";function c(a){var b=0;for(var c in a)b++;return b}function d(a){var b={},d=e(),f=c(a);0===f&&d.resolve({});var g=function(a){return function(b){h(a,b)}},h=function(a,c){b[a]=c,0===--f&&d.resolve(b)},i=function(a){d.reject(a)};for(var j in a)a[j]&&"function"==typeof a[j].then?a[j].then(g(j),i):h(j,a[j]);return d.promise}var e=a.defer;b.hash=d}),a("rsvp/node",["rsvp/promise","rsvp/all","exports"],function(a,b,c){"use strict";function d(a,b){return function(c,d){c?b(c):arguments.length>2?a(Array.prototype.slice.call(arguments,1)):a(d)}}function e(a){return function(){var b,c,e=Array.prototype.slice.call(arguments),h=this,i=new f(function(a,d){b=a,c=d});return g(e).then(function(e){e.push(d(b,c));try{a.apply(h,e)}catch(f){c(f)}}),i}}var f=a.Promise,g=b.all;c.denodeify=e}),a("rsvp/promise",["rsvp/config","rsvp/events","exports"],function(a,b,c){"use strict";function d(a){return e(a)||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){k.onerror&&k.onerror(a.detail)}function g(a,b){a===b?i(a,b):h(a,b)||i(a,b)}function h(a,b){var c,f=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(d(b)&&(f=b.then,e(f)))return f.call(b,function(d){return c?!0:(c=!0,b!==d?g(a,d):i(a,d),void 0)},function(b){return c?!0:(c=!0,j(a,b),void 0)}),!0}catch(h){return j(a,h),!0}return!1}function i(a,b){k.async(function(){a.trigger("promise:resolved",{detail:b}),a.isFulfilled=!0,a.fulfillmentValue=b})}function j(a,b){k.async(function(){a.trigger("promise:failed",{detail:b}),a.isRejected=!0,a.rejectedReason=b})}var k=a.config,l=b.EventTarget,m=function(a){var b=this,c=!1;if("function"!=typeof a)throw new TypeError("You must pass a resolver function as the sole argument to the promise constructor");if(!(b instanceof m))return new m(a);var d=function(a){c||(c=!0,g(b,a))},e=function(a){c||(c=!0,j(b,a))};this.on("promise:resolved",function(a){this.trigger("success",{detail:a.detail})},this),this.on("promise:failed",function(a){this.trigger("error",{detail:a.detail})},this),this.on("error",f);try{a(d,e)}catch(h){e(h)}},n=function(a,b,c,d){var f,i,k,l,m=e(c);if(m)try{f=c(d.detail),k=!0}catch(n){l=!0,i=n}else f=d.detail,k=!0;h(b,f)||(m&&k?g(b,f):l?j(b,i):"resolve"===a?g(b,f):"reject"===a&&j(b,f))};m.prototype={constructor:m,isRejected:void 0,isFulfilled:void 0,rejectedReason:void 0,fulfillmentValue:void 0,then:function(a,b){this.off("error",f);var c=new this.constructor(function(){});return this.isFulfilled&&k.async(function(b){n("resolve",c,a,{detail:b.fulfillmentValue})},this),this.isRejected&&k.async(function(a){n("reject",c,b,{detail:a.rejectedReason})},this),this.on("promise:resolved",function(b){n("resolve",c,a,b)}),this.on("promise:failed",function(a){n("reject",c,b,a)}),c}},l.mixin(m.prototype),c.Promise=m}),a("rsvp/reject",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b,c){c(a)})}var d=a.Promise;b.reject=c}),a("rsvp/resolve",["rsvp/promise","exports"],function(a,b){"use strict";function c(a){return new d(function(b){b(a)})}var d=a.Promise;b.resolve=c}),a("rsvp",["rsvp/events","rsvp/promise","rsvp/node","rsvp/all","rsvp/hash","rsvp/defer","rsvp/config","rsvp/resolve","rsvp/reject","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a,b){r[a]=b}var l=a.EventTarget,m=b.Promise,n=c.denodeify,o=d.all,p=e.hash,q=f.defer,r=g.config,s=h.resolve,t=i.reject;j.Promise=m,j.EventTarget=l,j.all=o,j.hash=p,j.defer=q,j.denodeify=n,j.configure=k,j.resolve=s,j.reject=t}),window.RSVP=b("rsvp")}(window);var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return"string"==typeof a||a instanceof String},d=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a){return"[object Object]"===Object.prototype.toString.call(a)},f=function(a){return"[object Function]"===Object.prototype.toString.call(a)},g=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},h=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},i=function(){},j=function(a){return"[object Number]"===Object.prototype.toString.call(a)},k=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},l=function(a){return"[object Date]"===Object.prototype.toString.call(a)},m=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},n=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},o=function(a){return void 0===a},p=function(a){return void 0!==a},q=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},r=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},s=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},t=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},u=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(a[c]=this.isObject(b[c])?B(b[c]):b[c]);return a},v=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},w=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},x=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},y=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},z=function(a){return!(!a||1!==a.nodeType)},A=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},B=function(a){return this.combine({},a,!0)},C=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},D=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},E=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},F=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},G=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},H=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},I=function(a){return typeof a==typeof Function},J=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=J(a,c,e)),d&&(d.style.display=""),e},K=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),P(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},L=function(a,b){return a.getAttribute("data-"+b)},M=function(a,b,c){return a.setAttribute("data-"+b,c)},N=function(a,c){return N=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)},N(a,c)},O=function(a,c){var d,e,f=this;return O=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!N(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b},O(a,c)},P=function(a,c){return P=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")},P(a,c)},Q=function(a){a.className="",a.setAttribute("class","")},R=function(a,c){return R=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return N(a,b)?(P(a,b),!1):(O(a,b),!0)},R(a,c)},S=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},T=function(a){return b.querySelector(a)},U=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},V=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},W=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)};return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),Object.prototype.mix||(Object.prototype.mix=function(a){var b,c=this;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),{isString:c,isArray:d,isObject:e,isFunction:f,emptyFn:i,isNumber:j,isBoolean:k,isDate:l,isInt:m,has:n,isUndefined:o,isDefined:p,isEmpty:q,isArgument:r,upperFirst:s,multiIs:t,combine:u,imports:h,isDomList:v,toArray:w,contains:x,indexOf:y,isElement:z,size:A,clone:B,isRegex:C,keys:D,once:E,memoize:F,removeObject:G,getStyle:H,isFunctionByType:I,getNodeOnPoint:J,getNodesOnPoint:K,getData:L,setData:M,containsClass:N,addClass:O,removeClass:P,removeClasses:Q,toggleClass:R,triggerEvent:S,$:T,setAnimationFrameTimeout:U,animationEvent:V,domReady:W,arrayMatch:g}}(window,window.document);var adapters=adapters||{};adapters.glue=function(a,b){"use strict";return{module:{create:a.define,get:a.require,config:a.requirejs.config},sugar:b.sugar,component:function(){var a=this;return{create:function(b,c){var d,e,f,g={};a.module.get(b,function(){for(f=Array.prototype.slice.call(arguments),d=0,e=f.length;e>d;++d)f[d](g);c.call(a,g)})}}}}}(window,modules.glue),function(){var a=function(a){"use strict";return{module:a.glue.module,sugar:a.glue.sugar,component:a.glue.component,game:a.glue.game}}(adapters);window.glue={module:a.module},window.game={},a.module.create("glue",["audio51"],function(b){return a.audio=b,a})}(),define("audio51",["webaudio/context","audiotag/context","audiotag/restricted","unrestrict"],function(a,b,c,d){"use strict";var e={mp3:"audio/mpeg",ogg:"audio/ogg",ac3:"audio/ac3"},f=function(){var e=null;return function(f){if(f)switch(f){case 3:e=c;break;case 2:e=b;break;default:e=a}else null===e&&(e=a.canIUse()?a:d.isTouch()?c:b);return e}}(),g={};return{RESTRICTED:3,AUDIOTAG:2,WEBAUDIO:1,getContext:function(a){return f(a)
},loadSoundSet:function(a){var b=new XMLHttpRequest,c=this;return new RSVP.Promise(function(d){b.open("GET",a,!0),b.onload=function(){d(c.parseSoundSet(JSON.parse(b.response)))},b.send()})},parseSoundSet:function(a){var b,c,d,h,i,j=document.createElement("audio");for(g=a,b=0;b<a.resources.length&&(i=a.resources[b],h=i.substr(0,i.lastIndexOf(".")),c=i.substr(h.length+1),d=e[c],!(d&&j.canPlayType&&j.canPlayType(d)));++b);return f().parse(a,h,c)},play:function(a){return f().play(a)}}}),define("audiotag/context",["audiotag/sound"],function(a){"use strict";var b={},c=function(b){var c=new RSVP.Promise(function(c){var d=new Audio;d.addEventListener("canplay",function(){c(a(d))}),d.src=b});return c},d=function(a,d){return c(d).then(function(c){return b[a]=c,c})};return{loadSound:function(a){return c(a)},parse:function(a,b,c){var e,f,g=0,h=[];for(e in a.spritemap)f=b+"_00"+ ++g+"."+c,h.push(d(e,f));return RSVP.all(h)},play:function(c){var d=null;return b[c]&&(d=b[c],b[c]=a(d.tag.cloneNode()),d.play()),d}}}),define("audiotag/restricted",["audiotag/context","audiotag/sprite"],function(a,b){"use strict";var c={},d=null,e=null,f=function(a,b){function c(){b(a)&&(d=e(c))}var d=null,e=window.requestAnimationFrame||webkitRequestAnimationFrame,f=window.cancelAnimationFrame||webkitCancelRequestAnimationFrame;return{start:function(){d=e(c)},stop:function(){"undefined"!=typeof f&&f(d)}}},g=function(a,d){var e=new b(a,d);return c[a]=e,e},h=function(a){e.tag.currentTime=a.start};return{loadSound:function(){throw"Cannot load separate sounds in this context!"},parse:function(b,c,f){var h,i=[];d=b.spritemap;for(h in b.spritemap)i.push(g(h,this));return a.loadSound(c+"."+f).then(function(a){return e=a,i})},play:function(a){var b=null;return c[a]&&(b=c[a],b.play()),b},stop:function(){e.stop()},playSprite:function(a){var b=d[a],c=b.end-b.start;.5>c&&(b.start=b.start-.1,b.end=Math.floor(b.end)+.5),h(b),this.animationScope&&(this.animationScope.stop(),this.animationScope=null);var g=this;this.animationScope=f({context:g,sound:e,sprite:b},function(a){var b=a.context,c=a.sound,d=a.sprite;return c.tag.currentTime>d.end?(b.stop(),!1):!0}),this.animationScope.start(),e.play()}}}),define("audiotag/sound",["unrestrict"],function(a){"use strict";var b=function(b,h){var i=function(){c(b)};return h||(a.on("userInteraction",i),a.arm()),{play:function(){d(b)},stop:function(){e(b)},getLength:function(){return f(b)},loop:function(a){g(b,a)},tag:b}},c=function(a){a.play(),a.pause()},d=function(a){a.play()},e=function(a){a.pause(),a.currentTime=0},f=function(a){return a.duration},g=function(a,b){a.loop=b};return b}),define("audiotag/sprite",[],function(){"use strict";var a=function(a,b){this.id=a,this.context=b};return a.prototype={play:function(){this.context.playSprite(this.id)},stop:function(){this.context.stop()},getLength:function(){throw"Not Yet Implemented"},loop:function(){throw"Not Yet Implemented"}},a}),define("manager",function(){"use strict"});var AudioTestFramework=function(){"use strict";function a(){this.ctx=c(),this.destination=d(),this.destination.connect(c().destination),h=this;var a=this;Audio=function(b){var c=new g;return c.autoplay=!0,c.addEventListener("canplay",function(){e(c,a)},0),b&&(c.src=b),h=c,c}}var b,c=function(a){var b=null,c=function(){return null===b&&(b=new a),b};return c.reset=function(){b=null},c}(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext),d=function(){var a=null,b=function(){return null===a&&(a=c().createAnalyser(),a.smoothingTimeConstant=0,a.fftSize=1024),a};return b.reset=function(){a=null},b}(),e=function(a,b){var d=c().createMediaElementSource(a);d.connect(b.destination),a.pause(),a.audionode=d,a.tc=b,a.isConnected=!0,a.context=b,a.orgClone=a.cloneNode,a.cloneNode=function(){var c=a.orgClone();return e(c,b),c}},f=window.AudioContext,g=Audio,h=null;a.prototype={getContext:function(){return this.ctx},isPlaying:function(){return this.ctx.activeSourceCount>0}},a.getVolumeAverage=function(){var a,b,c,e=0,f=new Uint8Array(d().frequencyBinCount);for(d().getByteFrequencyData(f),a=f.length,c=0;a>c;++c)e+=f[c];return b=e/a},a.reset=function(){d.reset(),h.destination=d()};for(b in c())Object.hasOwnProperty(b)||!function(b){a.prototype[b]=function(){var a=c();return a[b].apply(a,arguments)}}(b);return a.undo=function(){window.AudioContext=f,Audio=g},window.AudioContext=a,a}();define("unrestrict",function(){"use strict";var a,b,c=["touchstart","touchmove","touchenter","touchcancel","click","scroll"],d=[],e=document.body,f=c.length,g=function(){i.trigger("userInteraction"),h()},h=function(){for(a=0;f>a;++a)b=c[a],e.removeEventListener(b,g);d=[],i.off("userInteraction")},i={arm:function(){if(!(d.length>0))for(a=0;f>a;++a)b=c[a],e.addEventListener(b,g)},isTouch:function(){var a="ontouchstart"in window||navigator.msMaxTouchPoints>0;return function(){return a}}()};return i.arm(),RSVP.EventTarget.mixin(i),i}),define("webaudio/context",["webaudio/sound","unrestrict"],function(a,b){"use strict";var c=function(a){var b=null;return function(){return null===b&&a&&(b=new a),b}}(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext),d={},e={},f={},g=function(a){return new RSVP.Promise(function(b){if(d[a])b(d[a]);else{var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){d[a]=c.response,b(c.response)},c.responseType="arraybuffer",c.send()}})},h=function(a){return new RSVP.Promise(function(b,d){c().decodeAudioData(a,function(a){b(a)},function(a){d(a)})})},i=function(a){return g(a).then(function(a){return h(a)})},j=function(){var a=c(),b=a.createBuffer(1,1,22050),d=a.createBufferSource();d.buffer=b,d.connect(a.destination),d.start?d.start(0):d.noteOn(0)},k=function(b){return i(b).then(function(d){var f=c();return e[encodeURIComponent(b)]=d,a(d,f)})},l=function(a,b){return k(b).then(function(c){return f[a]=encodeURIComponent(b),c},function(){console.warn(arguments)})};return b.on("userInteraction",j),{loadSound:function(a){return k(a)},parse:function(a,b,c){var d,e,f=0,g=[];for(d in a.spritemap)e=b+"_00"+ ++f+"."+c,g.push(l(d,e));return RSVP.all(g)},canIUse:function(){return null!==c()},play:function(b){var d=null;return f[b]&&(d=a(e[f[b]],c()),d.play()),d}}}),define("webaudio/sound",function(){"use strict";var a=function(a,g){var h=b(a,g);return{play:function(){c(h)},stop:function(){h=d(h,a,g)},getLength:function(){return e(h)},loop:function(a){f(h,a)}}},b=function(a,b){var c=b.createBufferSource();return c.buffer=a,c.connect(b.destination),c},c=function(a){a.start?a.start(0):a.noteOn(0)},d=function(a,c,d){return a.stop?a.stop(0):a.noteOff(0),a.disconnect(),b(c,d)},e=function(a){return a.buffer.length/a.buffer.sampleRate},f=function(a,b){a.loop=b};return a}),glue.module.create("glue/component",["glue"],function(){return function(){var a="",b={add:function(a){return this.mix(a),this}},c=Array.prototype.slice.call(arguments),d=null,e=c.length,f=0;for(f;e>f;++f)d=c[f],d(b);return b.mix({setName:function(b){a=b},getName:function(){return a}})}}),glue.module.create("glue/component/animatable",["glue","glue/math/vector"],function(a,b){return function(c){var d,e,f,g,h,i,j=a.sugar,k={},l=0,m=1,n=60,o=1/n,p=o,q=function(){i||(c.visible.setImage(e.image),i=c.visible.getImage()),m=e.endFrame-e.startFrame,o=e.fps?1/e.fps:1/d.fps,p=o,f=e.frameCount?i.width/e.frameCount:i.width/d.frameCount,g=e.startFrame-1,h=e.endFrame,l=g};return c=c||{},c.animatable={setup:function(a){if(a&&a.animation&&(d=a.animation,a.animation.animations&&(k=a.animation.animations)),j.isDefined(c.visible))c.visible.setup(a);else if(window.console)throw"Animatable needs a Visible component";a.image&&(i=a.image)},update:function(a){p-=a,0>=p&&(p=o,++l,l===h&&(l=g))},draw:function(a,d,e){var g=c.visible.getPosition(),h=f*l;e=e||b(0,0),d.save(),d.translate(g.x-e.x,g.y-e.y),j.isDefined(c.rotatable)&&c.rotatable.draw(a,d),j.isDefined(c.scalable)&&c.scalable.draw(a,d),d.drawImage(i,h,0,f,i.height,0,0,f,i.height),d.restore()},setAnimation:function(a){k[a]&&(e=k[a],q())},getDimension:function(){var a=c.visible.getDimension();return a.width=f,a},getBoundingBox:function(){var a=c.visible.getBoundingBox();return a.y2=a.y1+f,a},getFrameWidth:function(){return f}},c}}),glue.module.create("glue/component/clickable",["glue"],function(){return function(a){var b=function(b){return a.visible.getBoundingBox().hasPosition(b.position)},c=function(c){b(c)&&a.onClick&&a.onClick(c)},d=function(c){b(c)&&a.onClick&&a.onClick(c)};return a=a||{},a.clickable={setup:function(){},destroy:function(){},update:function(){},pointerDown:function(a){c(a)},pointerUp:function(a){d(a)}},a}}),glue.module.create("glue/component/draggable",["glue","glue/math/vector","glue/event/system"],function(a,b,c){var d=[],e=30;return function(a){var f,g=!1,h=b(0,0),i=function(a){var b,c=0,e=d.length,f=!0;for(c;e>c;++c)if(b=d[c],b!==a&&b.z>a.z){f=!1;break}return f},j=function(b){return a.visible.getBoundingBox().hasPosition(b.position)},k=function(b){j(b)&&g===!1&&(d.push(a),setTimeout(function(){return i(a)?(g=!0,f=b.pointerId,h=b.position.substract(a.visible.getPosition()),a.dragStart&&a.dragStart(b),!1):void 0},e))},l=function(b){g===!0&&f===b.pointerId&&(a.visible.setPosition(b.position.substract(h)),a.dragMove&&a.dragMove(b))},m=function(b){return g===!0?(c.fire("draggable.drop",a,b),d=[],f=void 0,g=!1,a.dragEnd&&a.dragEnd(b,function(){}),!1):void 0};return a=a||{},a.draggable={setup:function(){},update:function(){},pointerDown:function(a){k(a)},pointerMove:function(a){l(a)},pointerUp:function(a){m(a)},dragStartTimeout:function(a){e=a}},a}}),glue.module.create("glue/component/droptarget",["glue","glue/event/system"],function(a,b){return function(a){var c=function(b,c){return a.visible.getBoundingBox().hasPosition(c.position)},d=function(b,d){c(a,d)&&a.onDrop&&a.onDrop(b,d)};return a=a||{},a.droptarget={setup:function(){b.on("draggable.drop",d)},destroy:function(){b.off("draggable.drop",d)},update:function(){}},a}}),glue.module.create("glue/component/fadable",["glue"],function(a){var b=a.sugar;return function(a){var c,d,e=!1,f=!1,g=.5,h=null;return a=a||{},a.fadable={update:function(a){e===!0?d+a*g>c?c+=g*a:(c=d,e=!1,null!==h&&h()):f===!0&&(c>d-a*g?c-=g*a:(c=d,f=!1,null!==h&&h()))},draw:function(a){return a.globalAlpha=c,a},fade:function(a,g,i){c=g,d=i,e=i>g?!0:!1,f=g>i?!0:!1,b.isDefined(a)&&(h=a)},fadeIn:function(a,f){c=0,d=f||1,e=!0,b.isDefined(a)&&(h=a)},fadeOut:function(a,e){c=1,d=e||0,f=!0,b.isDefined(a)&&(h=a)},setAlpha:function(a){b.isNumber(a)&&(c=a)},getAlpha:function(){return c},setTargetAlpha:function(a){b.isNumber(a)&&(d=a)},getTargetAlpha:function(){return d},setFadeSpeed:function(a){b.isNumber(a)&&(g=a)},getFadeSpeed:function(){return g},atTarget:function(){return!e&&!f}},a}}),glue.module.create("glue/component/hoverable",["glue"],function(){return function(a){var b="not hovered",c=function(b){return a.visible.getBoundingBox().hasPosition(b.position)},d=function(d){c(d)?"not hovered"===b&&(a.hoverOver&&a.hoverOver(d),b="hovered"):"hovered"===b&&(a.hoverOut&&a.hoverOut(d),b="not hovered")};return a=a||{},a.hoverable={setup:function(){},destroy:function(){},update:function(){},pointerMove:function(a){d(a)}},a}}),glue.module.create("glue/component/movable",["glue","glue/math/vector"],function(a){var b=a.sugar;return function(a){var c,d=null,e=100,f=!0,g=0;return a=a||{},a.movable={update:function(b){if(null!==d){var h,i,j;c=a.visible.getPosition(),i=d.x-c.x,j=d.y-c.y,Math.sqrt(i*i+j*j)<e*b?(f=!0,c=d,a.visible.setPosition(c)):(h=Math.atan2(j,i),c.x+=Math.cos(h)*e*b,c.y+=Math.sin(h)*e*b,g=180*h/Math.PI,a.visible.setPosition(c))}},hasTarget:function(){return null!==d},atTarget:function(){return f},getRotation:function(){return g},setTarget:function(a){if(!b.isObject(a)&&b.isDefined(a.x)&&b.isDefined(a.y))throw"Invalid target supplied";f=!1,d=a},setMoveSpeed:function(a){if(!b.isNumber(a))throw"Invalid speed supplied";e=a}},a}}),glue.module.create("glue/component/rotatable",["glue","glue/math/vector"],function(a,b){return function(c){var d=a.sugar,e=0,f=100,g=0,h=1,i=b(0,0),j=180/Math.PI,k=!0,l=Math.PI/180;return c=c||{},c.rotatable={update:function(a){var b,c,d,i;this.getAngleDegree()<0?this.setAngleDegree(359):this.getAngleDegree()>360&&this.setAngleDegree(1),e!==g&&(b=this.getTargetDegree(),c=this.getAngleDegree(),d=f*h,i=b>c?b-c:c-b,Math.floor(Math.abs(i))<Math.abs(d*a)?(e=g,k=!0):(c+=d*a,this.setAngleDegree(c)))},draw:function(a,b){b.translate(i.x,i.y),b.rotate(e),b.translate(-i.x,-i.y)},setAngleDegree:function(a){e=d.isNumber(a)?a:e,e*=l},setAngleRadian:function(a){e=d.isNumber(a)?a:e},setOrigin:function(a){i.x=d.isNumber(a.x)?a.x:i.x,i.y=d.isNumber(a.y)?a.y:i.y},setTargetDegree:function(a,b){g=d.isNumber(a)?a:g,g*=l,d.isDefined(b)&&(h=b?1:-1),k=!1},setTargetRadian:function(a,b){g=d.isNumber(a)?a:g,d.isDefined(b)&&(h=b?1:-1),k=!1},setSpeed:function(a){f=d.isNumber(a)?a:f,f=Math.floor(f)},getAngleDegree:function(){return e*j},getAngleRadian:function(){return e},getOrigin:function(){return i},getTargetDegree:function(){return g*j},getTargetRadian:function(){return g},atTarget:function(){return k}},c}}),glue.module.create("glue/component/scalable",["glue","glue/math/vector"],function(a,b){return function(c){var d=a.sugar,e=b(0,0),f=b(1,1),g=b(1,1),h=1,i=!0;return c=c||{},c.scalable={update:function(a){if(i)f=g;else{var b,c,d;c=g.x-f.x,d=g.y-f.y,Math.sqrt(c*c+d*d)<h*a?i=!0:(b=Math.atan2(d,c),f.x+=Math.cos(b)*h*a,f.y+=Math.sin(b)*h*a)}},draw:function(a,b){b.translate(e.x,e.y),b.scale(f.x,f.y),b.translate(-e.x,-e.y)},setScale:function(a){f.x=d.isNumber(a.x)?a.x:f.x,f.y=d.isNumber(a.y)?a.y:f.y},setTarget:function(a){g.x=d.isNumber(a.x)?a.x:g.x,g.y=d.isNumber(a.y)?a.y:g.y,i=!1},setSpeed:function(a){h=d.isNumber(a)?a:h,h=Math.floor(h/100)},setOrigin:function(a){e.x=d.isNumber(a.x)?a.x:e.x,e.y=d.isNumber(a.y)?a.y:e.y},getScale:function(){return f},getTarget:function(){return g},getSpeed:function(){return Math.floor(100*h)},getOrigin:function(){return e},atTarget:function(){return i}},c}}),glue.module.create("glue/component/visible",["glue","glue/math/vector","glue/math/dimension","glue/math/rectangle","glue/component/rotatable"],function(a,b,c,d){return function(c){var e,f=a.sugar,g=b(0,0),h=null,i=null,j=function(){e.x1=g.x,e.y1=g.y,e.x2=g.x+h.width,e.y2=g.y+h.height};return c=c||{},c.visible={setup:function(a){a&&(a.image&&(i=a.image),i=a.image,a.position&&(customPosition=a.position,g=b(Math.round(customPosition.x),Math.round(customPosition.y))),a.dimension?h=a.dimension:i&&(h={width:i.naturalWidth,height:i.naturalHeight},e=d(g.x,g.y,g.x+h.width,g.y+h.height)))},draw:function(a,d,e){e=e||b(0,0),d.save(),f.isDefined(c.rotatable)&&c.rotatable.draw(a,d),f.isDefined(c.scalable)&&c.scalable.draw(a,d),d.drawImage(i,g.x-e.x,g.y-e.y),d.restore()},getPosition:function(){return g},setPosition:function(a){g=a,j()},getDimension:function(){return h},setDimension:function(a){h=a,j()},getBoundingBox:function(){return e},setBoundingBox:function(a){e=a},setImage:function(a){i=a,h={width:i.naturalWidth,height:i.naturalHeight},j()},getImage:function(){return i}},c}}),glue.module.create("glue/event/system",function(){var a=[],b=function(b,c,d){var e,f,g=a.length;if(g>0)for(e=0;g>e;++e)f=a[e],f&&f.name===c&&f.callback.apply({name:c,emitter:b},d)};return{on:function(b,c){return a.push({name:b,callback:c}),[b,c]},off:function(b,c){var d,e,f;for(d=0,e=a.length;e>d;++d)f=a[d],f&&f.name===b&&f.callback===c&&a.splice(d,1)},fire:function(a){b("system",a,Array.prototype.slice.call(arguments,1,arguments.length))}}}),glue.module.create("glue/game",["glue","glue/math/vector","glue/event/system","glue/loader"],function(a,b,c,d){var e,f,g=a.sugar,h=null,i=null,j=[],k=[],l=[],m=(new Date).getTime(),n=null,o=null,p=null,q=null,r=!1,s=null,t={},u=b(0,0),v=!1,w=!1,x=null,y=0,z=0,A=5e5,B=function(){n=document.querySelector("#"+f),null===n&&(n=document.createElement("canvas"),n.id=f,n.width=s.width,n.height=s.height,null!==document.getElementById("wrapper")?document.getElementById("wrapper").appendChild(n):document.body.appendChild(n)),C(),n.getContext&&(r=!0,o=n.getContext("2d"),p=document.createElement("canvas"),p.width=n.width,p.height=n.height,q=p.getContext("2d"))},C=function(){var a,b,c=n.height/n.width,d=window.innerHeight/window.innerWidth;c>d?(b=window.innerHeight,a=b/c):(a=window.innerWidth,b=a*c),t.x=a/s.width,t.y=b/s.height,n.style.width=a+"px",n.style.height=b+"px"},D=function(){j.sort(function(a,b){return a.z-b.z})},E=function(){var a;if(k.length){for(var b=0;b<k.length;++b)a=k[b],a.init&&a.init(),j.push(k[b]);k=[],D()}},F=function(){var a;if(l.length){for(var b=0;b<l.length;++b)a=l[b],a.destroy&&a.destroy(),g.removeObject(j,a);l=[]}},G=function(){q.clearRect(0,0,p.width,p.height),o.clearRect(0,0,n.width,n.height)};return cycle=function(a){var b,c,d,f;if(v&&requestAnimationFrame(cycle),D(),r){if(G(),F(),E(),b=(a-m)/1e3,w&&(c=Math.round(1e3/(a-m),2),y+=c,++z,f=Math.round(y/z),y>A&&(y=z=0),x.innerHTML="<strong>Glue debug bar</strong>",x.innerHTML+="<br />version: 0.0.1 alpha",x.innerHTML+="<br />frame rate: "+c+" fps",x.innerHTML+="<br />average frame rate: "+f+"fps",x.innerHTML+="<br />components: "+j.length,e&&e.name&&(x.innerHTML+="<br />game name: "+e.name)),1>b)for(var g=0;g<j.length;++g)d=j[g],d.update&&d.update(b,u),d.draw&&d.draw(b,q,u);o.drawImage(p,0,0),m=a}},startup=function(){B(),setupEventListeners(),cycle(0)},pointerDown=function(a){var b,c,d;for(b=0,c=j.length;c>b;++b)d=j[b],d.pointerDown&&d.pointerDown(a)},pointerMove=function(a){var b,c,d;for(b=0,c=j.length;c>b;++b)d=j[b],d.pointerMove&&d.pointerMove(a)},pointerUp=function(a){var b,c,d;for(b=0,c=j.length;c>b;++b)d=j[b],d.pointerUp&&d.pointerUp(a)},addTouchPosition=function(a,c){var d=c?a.changedTouches[0]:a.targetTouches[0];a.preventDefault(),a.position=b((d.pageX-n.offsetLeft)/t.x,(d.pageY-n.offsetTop)/t.y)},addMousePosition=function(a){a.position=b((a.clientX-n.offsetLeft)/t.x,(a.clientY-n.offsetTop)/t.y)},touchStart=function(a){a.preventDefault(),addTouchPosition(a),pointerDown(a)},touchMove=function(a){a.preventDefault(),addTouchPosition(a),pointerMove(a)},touchEnd=function(a){a.preventDefault(),addTouchPosition(a,!0),pointerUp(a)},mouseDown=function(a){a.preventDefault(),addMousePosition(a),pointerDown(a)},mouseMove=function(a){a.preventDefault(),addMousePosition(a),pointerMove(a)},mouseUp=function(a){a.preventDefault(),addMousePosition(a),pointerUp(a)},setupEventListeners=function(){"ontouchstart"in h?(n.addEventListener("touchstart",touchStart),n.addEventListener("touchmove",touchMove),n.addEventListener("touchend",touchEnd)):(n.addEventListener("mousedown",mouseDown),n.addEventListener("mousemove",mouseMove),n.addEventListener("mouseup",mouseUp)),c.on("glue.pointer.down",pointerDown),c.on("glue.pointer.move",pointerMove),c.on("glue.pointer.up",pointerUp),window.addEventListener("resize",C,!1),window.addEventListener("orientationchange",C,!1),document.body.addEventListener("touchstart",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1}),document.body.addEventListener("touchmove",function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1})},shutdown=function(){n.removeEventListener("touchstart",touchStart),n.removeEventListener("touchmove",touchMove),n.removeEventListener("touchend",touchEnd),c.off("glue.pointer.down",pointerDown),c.off("glue.pointer.move",pointerMove),c.off("glue.pointer.up",pointerUp)},{setup:function(a,b){if(v)throw"Glue: The main game is already running";v=!0,h=window,i=h.document,f=a.canvas.id,s=a.canvas.dimension,a.game&&(e=a.game),a.develop&&a.develop.debug&&(w=!0,x=document.createElement("div"),x.id="debugBar",document.body.appendChild(x)),a.asset&&a.asset.image&&a.asset.image.path&&a.asset.image.source?(d.setAssetPath(a.asset.image.path),d.setAssets(a.asset.image.source),d.load(function(){startup(),b&&b()})):b&&b()},shutdown:function(){shutdown(),v=!1},add:function(a){k.push(a)},remove:function(a){l.push(a)},get:function(a){var b,c,d,e;for(b=0,c=j.length;c>b;++b)if(d=j[b],e=d.getName(),!g.isEmpty(e)&&e===a)return d},canvas:{getDimension:function(){return s},getScale:function(){return t},getContext:function(){return q}},getComponentCount:function(){return j.length},getScroll:function(){return u}}}),glue.module.create("glue/loader",["glue"],function(){var a,b,c=!1,d=0,e=0,f=null,g=null,h={},i=document.getElementById("loader"),j=document.getElementById("loadbar"),k=document.getElementById("percentagebar"),l=function(){++e,b=Math.floor(100*(e/d)),null!==j&&(j.style.width=b+"%"),null!==k&&(k.innerHTML=b+"%"),d===e&&(null!==i&&(i.style.display="none"),c=!0,a())},m=function(a){var b=new Image;return b.src=f+a,b.addEventListener("load",l,!1),b},n={setAssetPath:function(a){f=a},setAssets:function(a){g=a;for(asset in g)g.hasOwnProperty(asset)&&++d},load:function(b){null!==k&&(k.innerHTML="0%"),a=b;for(asset in g)g.hasOwnProperty(asset)&&(h[asset]=m(g[asset]))},isLoaded:function(){return c},getAssets:function(){if(!c)throw"Assets are not loaded yet";return h},getAsset:function(a){if(!c)throw"Asset "+a+" is not loaded yet";return h[a]}};return n}),glue.module.create("glue/math",["glue/math/dimension","glue/math/matrix","glue/math/vector"],function(a,b,c){"use strict";return function(){return{Dimension:a,Matrix:b,Vector:c}}}),glue.module.create("glue/math/dimension",function(){"use strict";return function(a,b,c){var d={width:a,height:b,depth:c||0};return{width:d.width,height:d.height,depth:d.depth,get:function(){return d}}}}),glue.module.create("glue/math/matrix",["glue"],function(a){"use strict";var b=a.sugar;return function(a,c,d){var e,f,g,h=[];for(f=0;a>f;++f){for(e=[],g=0;c>g;++g)e[g]=d||null;h[f]=e}return{get:function(){return h},getValue:function(a,b){return void 0!==h[a]&&void 0!==h[a][b]?h[a][b]:void 0},iterate:function(d){for(f=0;a>f;++f)for(g=0;c>g;++g){if(!b.isFunction(d))throw"Please supply a callback function";d(f,g,h[f][g])}},set:function(a,b,c){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=c)},unset:function(a,b){void 0!==h[a]&&void 0!==h[a][b]&&(h[a][b]=null)}}}}),glue.module.create("glue/math/polygon",function(){"use strict";return function(a){return{get:function(){return a},hasPosition:function(b){var c,d=!1,e=a[0].x,f=a[0].x,g=a[0].y,h=a[0].y,i=1,j=0,k=a.length-1;for(i=1;i<a.length;++i)c=a[i],e=Math.min(c.x,e),f=Math.max(c.x,f),g=Math.min(c.y,g),h=Math.max(c.y,h);if(b.x<e||b.x>f||b.y<g||b.y>h)return!1;for(k;j<a.length;k=j++)a[j].y>b.y!=a[k].y>b.y&&b.x<(a[k].x-a[j].x)*(b.y-a[j].y)/(a[k].y-a[j].y)+a[j].x&&(d=!d);return d}}}}),glue.module.create("glue/math/rectangle",function(){"use strict";return function(a,b,c,d){return{x1:a,y1:b,x2:c,y2:d,get:function(){return{x1:this.x1,y1:this.y1,x2:this.x2,y2:this.y2}},hasPosition:function(a){return a.x>=this.x1&&a.x<=this.x2&&a.y>=this.y1&&a.y<=this.y2?!0:void 0}}}}),glue.module.create("glue/math/vector",function(){"use strict";return function(a,b,c){return{x:a,y:b,z:c||0,get:function(){return{x:this.x,y:this.y,z:this.z}},add:function(a){return this.x+=a.x,this.y+=a.y,this},substract:function(a){return this.x-=a.x,this.y-=a.y,this},angle:function(a){return Math.atan2(a.y-this.y,a.x-this.x)},dotProduct:function(a){return this.x*a.x+this.y*a.y},distance:function(a){return Math.sqrt((this.x-a.x)*(this.x-a.x)+(this.y-a.y)*(this.y-a.y))}}}});var modules=modules||{};modules.glue=modules.glue||{},modules.glue.sugar=function(a,b){"use strict";var c=function(a){return"string"==typeof a||a instanceof String},d=Array.prototype.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a){return"[object Object]"===Object.prototype.toString.call(a)},f=function(a){return"[object Function]"===Object.prototype.toString.call(a)},g=function(a,b){var c=a.length;if(c!=b.length)return!1;for(;c--;)if(a[c]!==b[c])return!1;return!0},h=function(b,c){var d,e,f,g,h,i,j,k=[],l=a;for(e=0,g=b.length;g>e;++e){if(l=a,i=b[e].split("."),1===i.length)j=a[i];else for(d=0,f=i.length;f>d;++d)h=i[d],d===f-1?j=l[h]:l[h]&&(l=l[h]);if(!j||!this.isFunction(j))throw"glue.sugar.imports: Module "+b[e]+" not found or not a function";k.push(j)}return c.apply(glue,k)},i=function(){},j=function(a){return"[object Number]"===Object.prototype.toString.call(a)},k=function(a){return a===!0||a===!1||"[object Boolean]"===Object.prototype.toString.call(a)},l=function(a){return"[object Date]"===Object.prototype.toString.call(a)},m=function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},n=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},o=function(a){return void 0===a},p=function(a){return void 0!==a},q=function(a){var b;if(""===a||0===a||"0"===a||null===a||a===!1||this.isUndefined(a))return!0;if(this.isArray(a)&&0===a.length)return!0;if(this.isObject(a)){for(b in a)if(this.has(a,b))return!1;return!0}return!1},r=function(a){return"[object Arguments]"===Object.prototype.toString.call(a)},s=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},t=function(){for(var a=this.toArray(arguments),b=this["is"+this.upperFirst(a.shift())],c=a.length;c--;)if(!b.call(null,a[c]))return!1;return!0},u=function(a,b){var c;if(this.multiIs("array",a,b))return a.concat(b);for(c in b)this.has(b,c)&&(a[c]=this.isObject(b[c])?B(b[c]):b[c]);return a},v=function(a){return/^\[object (HTMLCollection|NodeList|Object)\]$/.test(toString.call(a))&&this.isNumber(a.length)&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},w=function(a){var b,c=[];if(!a)return[a];if(this.isArgument(a))return Array.prototype.slice.call(a);if(this.isString(a)&&a.split(""),this.isArray(a))return Array.prototype.slice.call(a);if(this.isDomList(a))return Array.prototype.slice.call(a);for(b in a)this.has(a,b)&&c.push(a[b]);return c},x=function(a,b){return this.isString(a)?-1!==a.indexOf(b)?!0:!1:this.isArray(a)?-1!==this.indexOf(a,b)?!0:!1:this.has(a,b)},y=function(a,b){var c=0;if(null===a)return-1;if(a.indexOf)return a.indexOf(b);for(c=a.length;c--;)if(a[c]===b)return c;return-1},z=function(a){return!(!a||1!==a.nodeType)},A=function(a){var b,c=0;if(!a)return 0;if(this.isObject(a))for(b in a)this.has(a,b)&&++c;return(this.isString(a)||this.isArray(a)||this.isArguments(a))&&(c=a.length),this.isNumber(a)&&(c=a.toString().length),c},B=function(a){return this.combine({},a,!0)},C=function(a){return!(!(a&&a.test&&a.exec)||!a.ignoreCase&&a.ignoreCase!==!1)},D=Object.prototype.keys||function(a){var b,c=[];if(a==Object(a))for(b in a)this.has(a,b)&&(c[c.length]=b);return c},E=function(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(a,arguments))}},F=function(a,b){var c={};return b=b||function(a){return a},function(){var d=b.apply(null,arguments);return this.has(c,d)?c[d]:c[d]=a.apply(a,arguments)}},G=function(a,b){var c,d;for(c=0,d=a.length;d>c;++c)if(a[c]===b){a.splice(c,1);break}},H=function(c,d,e){var f;return c.style&&this.isEmpty(c.style[d])?c.currentStyle?f=c.currentStyle[d]:a.getComputedStyle&&(f=b.defaultView.getComputedStyle(c,null).getPropertyValue(d)):c.style&&(f=c.style[d]),e?parseFloat(f):f},I=function(a){return typeof a==typeof Function},J=function(a,c,d){var e;return d&&(d.style.display="none"),e=b.elementFromPoint(a,c),e&&this&&this.containsClass(e,"omit")&&(e=J(a,c,e)),d&&(d.style.display=""),e},K=function(a,c,d){var e,f=!1,g=[];for(d&&(d.style.display="none"),f=b.elementFromPoint(a,c);f&&"BODY"!==f.tagName&&"HTML"!==f.tagName;)g.push(f),P(f,"animated"),f.style.display="none",f=b.elementFromPoint(a,c);for(e=0;e<g.length;++e)g[e].style.display="block";return d&&(d.style.display="block"),g},L=function(a,b){return a.getAttribute("data-"+b)},M=function(a,b,c){return a.setAttribute("data-"+b,c)},N=function(a,c){return N=b.documentElement.classList?function(a,b){return a.classList.contains(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)");return a.className.match(c)},N(a,c)},O=function(a,c){var d,e,f=this;return O=b.documentElement.classList?function(a,b){if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.classList.add(b[d]);else a.classList.add(b)}:function(a,b){if(!a)return!1;if(!N(a,b))if(f.isArray(b))for(d=0,e=b.length;e>d;++d)a.className+=(a.className?" ":"")+b[d];else a.className+=(a.className?" ":"")+b},O(a,c)},P=function(a,c){return P=b.documentElement.classList?function(a,b){a.classList.remove(b)}:function(a,b){if(!a||!a.className)return!1;var c=new RegExp("(^|\\s)"+b+"(\\s|$)","g");a.className=a.className.replace(c,"$2")},P(a,c)},Q=function(a){a.className="",a.setAttribute("class","")},R=function(a,c){return R=b.documentElement.classList&&b.documentElement.classList.toggle?function(a,b){return a.classList.toggle(b)}:function(a,b){return N(a,b)?(P(a,b),!1):(O(a,b),!0)},R(a,c)},S=function(a,b){if(document.createEvent){var c=document.createEvent("MouseEvents");return c.initEvent(b,!0,!1),a.dispatchEvent(c),!0}return document.createEventObject?(a.fireEvent("on"+b),!0):"function"==typeof a["on"+b]?(a["on"+b](),!0):!1},T=function(a){return b.querySelector(a)},U=function(a,b){function c(){var f=(new Date).getTime();f-d>=b?a():e=requestAnimationFrame(c)}var d=(new Date).getTime(),e=null;return void 0===b&&(b=1),c(),{cancel:function(){"undefined"!=typeof cancelAnimationFrame&&cancelAnimationFrame(e)}}},V=function(a,b,c,d){var e,f,g={start:["animationstart","animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],iteration:["animationiteration","animationiteration","webkitAnimationIteration","oanimationiteration","MSAnimationIteration"],end:["animationend","animationend","webkitAnimationEnd","oanimationend","MSAnimationEnd"],tend:["transitionend","transitionend","webkitTransitionEnd","otransitionend","MSTransitionEnd"]},h=g[b]||[],d=d||"add";for(f=0,e=h.length;e>f;++f)"add"===d?a.addEventListener(h[f],c,!1):"remove"===d&&a.removeEventListener(h[f],c,!1)},W=function(c){var d=b.readyState;"complete"===d||"interactive"===d?c():a.addEventListener?a.addEventListener("DOMContentLoaded",c):a.attachEvent("onload",c)};return Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(a){var b=obj.__proto__||obj.constructor.prototype;return a in this&&(!(a in b)||b[a]!==this[a])}),Object.prototype.mix||(Object.prototype.mix=function(a){var b,c=this;for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=window,d=0;d<b.length&&!c.requestAnimationFrame;++d)c.requestAnimationFrame=c[b[d]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[b[d]+"CancelAnimationFrame"]||c[b[d]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(b){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=c.setTimeout(function(){b(d+e)},e);return a=d+e,f}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)})}(),{isString:c,isArray:d,isObject:e,isFunction:f,emptyFn:i,isNumber:j,isBoolean:k,isDate:l,isInt:m,has:n,isUndefined:o,isDefined:p,isEmpty:q,isArgument:r,upperFirst:s,multiIs:t,combine:u,imports:h,isDomList:v,toArray:w,contains:x,indexOf:y,isElement:z,size:A,clone:B,isRegex:C,keys:D,once:E,memoize:F,removeObject:G,getStyle:H,isFunctionByType:I,getNodeOnPoint:J,getNodesOnPoint:K,getData:L,setData:M,containsClass:N,addClass:O,removeClass:P,removeClasses:Q,toggleClass:R,triggerEvent:S,$:T,setAnimationFrameTimeout:U,animationEvent:V,domReady:W,arrayMatch:g}}(window,window.document),glue.module.create("glue/domready",function(){"use strict";function a(a){var b;for(b=0;b<a.length;b+=1)a[b](j)}function b(){var b=k;i&&b.length&&(k=[],a(b))}function c(){i||(i=!0,g&&clearInterval(g),b())}function d(a){return i?a(j):k.push(a),d}var e,f,g,h="undefined"!=typeof window&&window.document,i=!h,j=h?document:null,k=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c),f=document.createElement("div");try{e=null===window.frameElement}catch(l){}f.doScroll&&e&&window.external&&(g=setInterval(function(){try{f.doScroll(),c()
}catch(a){}},30))}"complete"===document.readyState&&c()}return d.version="2.0.1",d.load=function(a,b,c,e){e.isBuild?c(null):d(c)},d});