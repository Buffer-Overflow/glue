<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Glue Engine Documentation - Modules</title>
    <link rel="stylesheet" href="css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
</head>
<body>
    <div class="wrapper">
        <h2 class="mainTitle">Modules</h2>
            <h3>Glue modules</h3>
            <p>
                Glue uses the <a href="http://en.wikipedia.org/wiki/Asynchronous_module_definition" target="_blank">Asynchronous Module Definition</a> to define her modules. This means that Glue is written in a modular way. Glue modules are written using the <a href="http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html" target="_blank">JavaScript module pattern</a>.
            </p>

            <h3>Create a Glue module</h3>
            <p>
                To create a Glue module you can use the global "glue" object. You can call the "module" object which contains the "create" method. The "create" method needs to have two parameters. The first is the name of the module and the second one is the function that represents the actual module. You can create a new Glue module in the following way:
            </p>

<pre>
glue.module.create('glue/documentation/test', function () {
    return {
        init: function () {
            console.log('Init test module');
        }
    };
});
</pre>

<p>
    As you can see we name our module 'glue.documentation.test'. The 'glue.documentation' part can be seen as the namespace. You can add multilevel namespaces separated by dots. The word after to last dot always represents the actual module name.
</p>

<p>
    The second parameter is the actual module function. In the example above we let the function return an object literal which contains an init method.
</p>

<h3>Get a Glue module</h3>

<p>
    To get an already created Glue module you can use 'glue.module.get'. Instead of passing a string as the first parameter, you need to pass in an array with strings. The module will then automatically be passed to the module function, as you can see in the example below:
</p>

<pre>
glue.module.get(['glue/documentation/test'], function (Test) {
    // call the init method on the the module
    Test.init();
});
</pre>

<p>
    To get multiple Glue modules, you can pass multiple strings in the array. The modules will then be passed to the function in the same order, like in the following example:
</p>

<pre>
glue.module.get(['glue/documentation/test', 'glue/namespace/other'], function (Test, OtherModule) {
    // call the init method on the the module
    Test.init();
    // you also have access to the other module
    OtherModule.someMethod();
});
</pre>

<div class="highlight highlight-html"><pre><span class="nt">&lt;head&gt;</span>
<span class="nt">    &lt;script </span><span class="na">src=</span><span class="s">"[PATH]/bower_components/glue.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</pre></div>

            <h3>Create a game</h3>

            <p>
                To create a new Glue Game you can use the Game module ('glue/game'). You you only need to startup your game once. After that, the running game instance will be available through the Game module.
            </p>
            <p>
                To start a game you can use the 'setup' method The setup method requires a configuration object. The canvas property is mandatory, because Glue needs it to get information about the canvas you want to use to render you game in. The canvas property needs tho contain the sub-properties "id" and "dimension". If there is a canvas present with the configured id, Glue will use this canvas, if not, Glue will automatically create the canvas for you. The dimension property needs to contain an object with the width and height of the canvas. To define the dimension you need to use the Dimension module ('glue/math/dimension'). You can see an example of this below.
            </p>

<pre>
glue.module.get(['glue/game', 'glue/math/dimension'], function (Game, Dimension) {
    Game.setup({
        game: {
            name: 'My Glue Game'
        },
        canvas: {
            id: 'canvas',
            dimension: Dimension(800, 600)
        }
    });
});
</pre>

            <h3>Adding a game object</h3>

            <p>
                Once you've created a running game, like explained in the previous chapter, you can add game objects to your game. The most simple game object is a JavaScript object literal, containing an update and a draw method. To add this object to the game you can use the "add" method which is also within the Game module.
            </p>

            <p>
                Once the object is added to the game, it's update and draw methods will be called from the main game loop on every cycle. The update function will receive the "deltaT" parameter which is the delta time since the previous call to the update method. The draw method also receives the "deltaT" parameter, and also receives the canvas context as a second parameter, which the object can use to draw on the game canvas. You can see an example of adding the most simple Glue object, a JavaScript object literal, to the already running Glue game below:
            </p>

<pre>
glue.module.create(['glue/game'], function (Game) {
    Game.add({
        update: function (deltaT) {
            // will be called on every cycle

            // as an example, we'll output to the console
            console.log('Update function', deltaT);
        },
        draw: function (deltaT, context) {
            // will be called on every cycle

            // as an example, we'll draw a text to the context
            context.fillStyle = 'blue';
            context.font = 'bold 16px Arial';
            context.fillText('Draw function result', 255, 180);
        }
    });
});
</pre>

            <p>
                As you can see the draw and update functions both get the deltaT (delta time) parameter passed in. This is a variable containing the time it took to render the current frame. You can use this variable to include in you update and draw logic to make sure your game runs at the same speed on every platform.
            </p>

            <p>
                The draw function also gets the context passed in as a second parameter. This is the main canvas context you can use to draw on. The result of the draw calls of all objects will be the visible result in the game. As an example we draw a text to the context.
            </p>

            <p>
                <a href="index.html">Back to the documentation index</a>
            </p>

        </section>
    </div>
    <script src="javascripts/scale.fix.js"></script>
</body>
</html>